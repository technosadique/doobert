<?php $base_url = $this->config->item('base_url'); ?>
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
<meta charset="utf-8"/>
<title>Manage Page Details - Animals Profile - Cooper - Doobert</title>
<?php include APPPATH."views/inc/header-css-js.php";?>
<?PHP //include APPPATH."views/includes/head-links-inside.php" ?>
<?PHP //include APPPATH."views/includes/head-links.php" ?>
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-datepicker/css/datepicker.css"/>
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css"/>
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-fileinput/bootstrap-fileinput.css"/>
<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-datepicker/css/datepicker.css"/>
<link href="<?php echo base_url(); ?>assets/cropper.css" rel="stylesheet" />
<style type="text/css">
.back_button {
	display:none;
}
</style>
</head>
<!-- BEGIN BODY -->
<body class="page-header-fixed ">
<div id="loader" style="display: none;"><img src="<?php echo base_url(); ?>assets/img/ajax-modal-loading.gif" width="32" height="32" align="absmiddle">&nbsp;<span id="loadertext">Loading...</span></div>
<!--Menu Active Link--> 
<?php $display_menu=2; ?>
<!-- BEGIN HEADER -->
<?PHP include APPPATH."views/inc/header-myaccount.php" ?>
 <?PHP //include APPPATH."views/includes/head-content-inside.php"; ?>
<?PHP //include APPPATH."views/includes/head-content-login.php"; ?>
<!-- END HEADER -->
<div class="clearfix"> </div>
<!-- BEGIN Breadcrumb -->
<section class="breadcrumb inner-breadcrumb">
	<div class="container">
		<div class="text-left">
			<a href="<?php echo base_url(); ?>dashboard">My Dashboard</a><i class="material-icons">chevron_right</i><a href="<?php echo base_url(); ?>org-dashboard">Org Dashboard</a><i class="material-icons">chevron_right</i><a href="<?php echo base_url(); ?>org_animal/animals_in_my_organization">Animals in Organization</a><i class="material-icons">chevron_right</i><a href="<?php echo base_url(); ?>org_animal/animal_profile_details/<?php echo $animal_id; ?>"><?php echo (isset($animal_name['st_animal_name']))?$animal_name['st_animal_name']:''; ?></a><i class="material-icons">chevron_right</i>Manage Page Details</div>
	</div>
</section>

<!-- BEGIN CONTAINER -->
<section class="main-content-wrapper inner-wrapper">
        <div class="container">
         <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
	                
					<article>
						<div class="entry-content">
							<div class="sub-content main-container clearfix">
								<div class="col-md-12 col-sm-12 col-xs-12 no-space">
  <!-- BEGIN CONTENT -->
  <div class="page-content-wrapper">
   <!-- BEING PAGE CONTENT-->
    <form class="horizontal-form" name="campaign" id="campaign" method="post" action="<?php echo base_url().'sponsorship-page-details'; ?>/<?php echo $animal_id; ?>" role="form">
      <div class="form-body doobert-form no-space fundraiser-info" id="page-details">
       <h1>Manage Page Details</h1>
        <?php 		
				/*echo "<pre>";
				print_r($cost_breakdown_details);
				echo "</pre>"; 
				die;*/
 			?>
        <!--Being Section Title-->
        <div class="gr-wrap col-md-12 col-sm-12 col-xs-12 campaign-detail-box no-space">
        <div class="title-patch title">Page Details </div>
        <div class="col-md-8 col-sm-8 col-xs-12 no-space">
        <div class="campaign-detail-inner-info clearfix">
        <div class="gr-wrap col-md-12 no-left-space ipad-paddright0">
          <?php if($error_msg) { ?>
          <div class="alert alert-danger"> <strong>Error!</strong><br>
            <br>
            <?php echo $error_msg; ?> </div>
          <?php } ?>
          <div class="gr-wrap col-md-12 col-sm-12 no-left-space sponser-title-info">
            <div class="form-group">
              <label class="control-label txtpagetitle" for="txtpagetitle">Page Title:</label>
              <input type="text" class="form-control in-block w270" name="txtpagetitle" id="txtpagetitle" maxlength="250" value="<?php echo (isset($get_campaign_detail[0]['st_page_title']))?htmlspecialchars($get_campaign_detail[0]['st_page_title']):htmlspecialchars($this->input->post('txtpagetitle')); ?>" autofocus onBlur="save_data();">
            </div>
          </div>
          
          
          <div class="gr-wrap col-md-12 col-sm-12 no-space sponser-date-info">
            <div class="form-group">
              <label class="control-label txtpagestorytitle" for="from_date">Campaign Date Range:</label>
              <div data-date-format="mm/dd/yyyy" data-date-start-date="+0d" class="input-group date-picker input-daterange">
                <div class="frm-date">
                  <input type="text" name="from" id="from_date" class="form-control from_date w111" value="<?php echo (isset($get_campaign_detail[0]['dt_campaign_start']))?date('m/d/Y',strtotime($get_campaign_detail[0]['dt_campaign_start'])):$this->input->post('from'); ?>" onBlur="save_data();">
                  <span class="input-group-addon pull-left from from-date-sel" id="datepicker-icon">
                        <i class="material-icons from-date-icon">date_range</i>
                    </span>
                </div>
                 <span class="input-group-addon date-to"> TO </span>
                <div class="to-date">
                  <input type="text" name="to" id="to_date" class="form-control to_date w111" value="<?php echo (isset($get_campaign_detail[0]['dt_campaign_end']))?date('m/d/Y',strtotime($get_campaign_detail[0]['dt_campaign_end'])):$this->input->post('to'); ?>" onBlur="save_data();">
                  <span class="input-group-addon pull-left to to-date-sel" id="datepicker-icon">
                        <i class="material-icons to-date-icon">date_range</i>
                    </span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="gr-wrap col-md-12 no-space">
                <div class="form-group">
                  <label class="control-label" for="txtstorytitle">Page Story Title:</label>
                  <input id="txtstorytitle" class="form-control in-block w270" type="text" autofocus value="<?php echo (isset($get_campaign_detail[0]['st_page_story_title']))?$get_campaign_detail[0]['st_page_story_title']:''; ?>" maxlength="250" name="txtstorytitle" onBlur="save_data();">
                </div>
              </div>
        </div>
        <div class="gr-wrap col-md-12 padr01 no-space mart10">
          <div class="form-group">
            <label class="control-label txtcustomurl">Custom URL for this Animal Page:</label>
            <div class="clearfix"></div>
            <div class="gr-wrap col-lg-12 no-space url-field">
              <label for="txtcustomurl">https://www.doobert.com/campaign/</label>
                <input type="text" class="form-control w270 in-block marr5" id="txtcustomurl" name="txtcustomurl" maxlength="250" value="<?php echo (isset($get_campaign_detail[0]['st_custom_url']))?$get_campaign_detail[0]['st_custom_url']:$this->input->post('txtcustomurl'); ?>" onBlur="save_data();">
                <span class="animal_url" style="display:none; color:#F00">URL already exist, Please specify other one.<br/>
                </span> <span class="egulr help-info">(e.g.: https://www.doobert.com/campaign/tweety)</span>
              </div>
            <div class="clearfix"></div>
          </div>
          <div class="gr-wrap col-md-12 no-space mart15">
            <div class="form-group marb0">
              <label class="control-label padt0 mart0 page-profile-story" for="profilestory">Page Profile Story:</label>
              <div class="radio-btn in-block">
              <input type="radio" checked="" value="option1" id="profilestory" name="profilestory" class="radio_check">
              <label class="radio-inline first" for="profilestory">Use Default Story from Animal Profile</label>
              <input type="radio" value="option2" id="enternew" name="profilestory" class="radio_check">
              <label class="radio-inline new" for="enternew">Enter New Story
              </label>
				</div>
              <textarea cols="1" rows="5" class="form-control" name="txtpagestorytitle" id="txtpagestorytitle" readonly onBlur="save_data();"><?php echo (isset($get_campaign_detail[0]['st_profile_story']))?htmlspecialchars($get_campaign_detail[0]['st_profile_story']):htmlspecialchars($animal_name['st_profile_story']); ?></textarea>
              <input type="hidden" name="animal_profile_story" id="animal_profile_story" value="<?php echo (isset($get_campaign_detail[0]['st_profile_story']))?htmlspecialchars($get_campaign_detail[0]['st_profile_story']):htmlspecialchars($animal_name['st_profile_story']); ?>" />
              <input type="hidden" name="animal_main_profile_story" id="animal_main_profile_story" value="<?php echo isset($animal_name['st_profile_story']) ? htmlspecialchars($animal_name['st_profile_story']) : ''; ?>" />
            </div>
          </div>
        </div>
        </div>
		</div>
       <div class="col-md-4 col-sm-4 col-xs-12">
        	<div class="right_img"><img src="<?php echo $base_url; ?>assets/img/img_right_select_campaign.jpg" alt="Doobert" /></div>
       </div>         
        
        <div class="row dobt-form no-margin"> </div>
		</div>
        <div class="clearfix"></div>
        <div class="down-part">
          <div class="gr-wrap col-md-12 col-sm-12 col-xs-12 campaign-detail-box no-space">
            <div class="row no-margin">
              <div class="title-patch title1">Cost Breakdown Details</div>
            </div>
            <div class="campaign-detail-inner-info clearfix cost-breakdown-detail">
            <div class="gr-wrap col-md-6 col-sm-6 col-xs-6 no-left-space cost-break-left-info">
            <?php 
					$total_cost = array();
					if($this->session->userdata('last_campaign_id') && !empty($cost_breakdown_details) || (!$this->session->userdata('last_campaign_id') && !empty($cost_breakdown_details))) {
						//if(!empty($cost_breakdown_details)) {	
							$i=1;
							foreach($cost_breakdown_details as $row) {
								array_push($total_cost,$row['in_cost']); 
				?>
            <div class="form-group">
              <div class="col-lg-9 col-md-9 col-sm-9 no-space cost-field">
                <input type="text" class="form-control cost_desc_chk" name="cost_desc1[]" id="cost-description_<?php echo $row['in_campaign_cost_id']; ?>" value="<?php echo htmlspecialchars($row['st_items']); ?>" maxlength="100" placeholder="Enter Cost Description..." onBlur="save_data();">
                <span class="input-group-btn">
                <button class="btn default remove_current" type="button"> <i class="material-icons font-20">delete</i> </button>
                </span> </div>
              <div class="col-md-3 col-sm-3 no-space fr text-right cost-field-data"><span class="input-group-addon cost-col"> : </span><div class="cost-wrapp">
                  <input type="text" class="form-control cost-amt" name="cost_price1[]" value="<?php echo $row['in_cost']; ?>" placeholder="$" onBlur="save_data();">
                  <input type="hidden" name="cost_breakdown_id[]" value="<?php echo $row['in_campaign_cost_id']; ?>" />
                </div>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="clearfix"></div>
            <?php 
						$i++;
							}
						//}
				?>
            <?php 
						} else if(!$this->session->userdata('last_campaign_id') && !empty($cost_breakdown)){
						//if(!empty($cost_breakdown)) {
							$i=1;
							foreach($cost_breakdown as $row) {
								array_push($total_cost,$row['in_amount']); 
				 ?>
            <div class="form-group">
              <div class="col-lg-9 col-md-9 col-sm-9 no-space cost-field">
                <input type="text" class="form-control cost_desc_chk" name="cost_desc1[]" id="cost-description_<?php echo $row['in_cost_id']; ?>" value="<?php echo htmlspecialchars($row['st_cost_desc']); ?>" maxlength="100" placeholder="Enter Cost Description..." onBlur="save_data();">
                <span class="input-group-btn">
                <button class="btn default remove_current" type="button"> <i class="fa fa-trash-o remove-btn"></i> </button>
                </span> </div>
              <div class="col-md-3 col-sm-3 no-space fr text-right cost-field-data"><span class="input-group-addon cost-col"> : </span><div class="cost-wrapp">
                  <input type="text" class="form-control cost-amt" name="cost_price1[]" value="<?php echo $row['in_amount']; ?>" placeholder="$" onBlur="save_data();">
                  <input type="hidden" name="cost_breakdown_id[]" value="<?php echo $row['in_cost_id']; ?>" />
                </div>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="clearfix"></div>
            <?php
						$i++;
							}
						//}
					} else {
				?>
            <div class="form-group">
            <label for="cost-description1" class="control-label">Enter Cost Description</label>
            <div class="clear"></div>
              <div class="col-lg-9 col-md-9 col-sm-9 no-space cost-field">
                <input type="text" class="form-control cost_desc_chk" name="cost_desc1[]" id="cost-description1" value="" placeholder="Enter Cost Description..." onBlur="save_data();">
                <span class="input-group-btn">
                <button class="btn default remove_current" type="button"><i class="material-icons">delete</i></button>
                </span> </div>
              <div class="col-md-3 col-sm-3 no-space text-right fr cost-field-data"><span class="input-group-addon cost-col"> : </span><div class="cost-wrapp">
                  <input type="text" class="form-control cost-amt" name="cost_price1[]" id="cost1" value="" placeholder="$" onBlur="save_data();">
                </div>
              </div>
              <div class="clearfix"></div>
            </div>
            <?php } ?>
            <div class="more2"></div>
            <div class="add-more-div"><a class="btn orange smallest cost-footer-btn" href="javascript:void(0);"><i class="material-icons font-13">add_circle</i> Add More</a></div>
            <div class="form-group">
              <div class="col-md-12 col-sm-12 no-space fr text-right total-cost"><label>Totals:</label>
                <div class="cost-wrapp amount total_cost flxible_amt">$<?php echo number_format(array_sum($total_cost),2); ?></div>
              </div>
              <div class="clearfix"></div>
				</div></div>
           <div class="gr-wrap col-md-6 col-sm-6 col-xs-6 photo-video-right-info">
            <div class="form-group">
				<label class="padt0 marb20">Photos/Videos:</label>
				<div class="clearfix"></div>
              <?php /*?><div id="add-files-info" style="display: block;">
								<div class="file-type clearfix">
									<div class="custom-file-input btn waves-effect waves-light"><input type="file" id="chosefile" onChange="pressed()"></div>
									<label id="fileLabel" class="padt0">No file choosen</label>
								</div>
								<span class="small-text">(Upload a .jpg, .jpe, .jpeg, .doc, .docx, .xls, .xlsx, .pdf file, 5MB Maximum)</span>
							</div><?php */?>
              <div class="video-image-row" style="display: block;">
                <input type="hidden" name="photo_cnt" id="photo_cnt" value="<?php echo (isset($campaign_images))?count($campaign_images):0; ?>" />
                <?php 
				//if($this->session->userdata('last_campaign_id')) {
			   		$count_photos = (isset($campaign_images))?count($campaign_images):0;//echo $count_photos;die;
					
			   		if(isset($campaign_images) && !empty($campaign_images) && $get_campaign_detail[0]['in_campaign_id']) {
						$i=1;$j=5;
						foreach($campaign_images as $row) {
               ?>
                <div class="thumbnail-wrapp crop_photos" data-thumb-id="<?php echo $row['in_campaign_file_id']; ?>"> 
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader<?php echo $row['in_campaign_file_id']; ?>">
                    <div class="fileinput fileinput-new12" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview<?php echo $j; ?>">
                        <?php if($row['st_file_type'] == 'P') { ?>
                        <img src="<?php echo $this->config->item('upload_url'); ?>animal_images/140x140/<?php echo $row['st_file_name']; ?>" alt="<?php echo $row['st_file_name']; ?>" title="<?php echo $row['st_file_name']; ?>">
                        <?php } else { ?>
                        <img src="<?php echo $row['st_file_name']; ?>" title="<?php echo $row['st_file_name']; ?>" alt="<?php echo $row['st_file_name']; ?>">
                        <?php } ?>
                      </div>
                      
                      <div class="uploader-labl marb5 add_photo_btn<?php echo $j; ?>"> <a href="javascript:void(0);" class="btn default w100p remove_images" data-inc-id="<?php echo $i; ?>" data-file="<?php echo $row['st_file_name']; ?>" data-id="<?php echo $row['in_campaign_file_id']; ?>"> <span class="remove_pic" id="photo_rem<?php echo $j; ?>"> <i class="material-icons">close</i></span> </a>                        
                        <img id="loadimg_<?php echo $row['in_campaign_file_id']; ?>" style="display:none;" src="<?php echo base_url(); ?>assets/img/ajax-loading.gif" alt="loader" /> </span> </div>
                        
                        
                        
                        
                      <?php if($row['st_file_type'] == 'P') { ?>
                      <div class="radio-btn" style="clear:both;display:block;">                     
                        <input type="radio" name="set_default" data-file-id="<?php echo $row['in_campaign_file_id']; ?>" class="default_check update_default_check"  id="set_default<?php echo $j; ?>" value="photo<?php echo $j; ?>" <?php if($row['in_profile_pic'] == 1)echo "checked"; ?> />
						  <label class="default_pic" id="profile_pic<?php echo $j; ?>" for="set_default<?php echo $j; ?>">Set as Profile</label></div>
                      <input type="hidden" name="set_default_edit" id="set_default_edit_<?php echo $row['in_campaign_file_id']; ?>" value="">
                      <?php } ?>
                      <?php /*?><span class="remove_pic" id="photo_rem<?php echo $j; ?>" style="display:none;"> 
                                <i class="fa fa-picture-o"></i> Remove
                        	</span><?php */?>
                    </div>
                  </div>
                </div>
                <!--End Image File Uploader-->
                
                <?php
						$i++;
						$j++;
						}
					} else {
				?>
                <?php 
			   		$count_photos = (isset($animal_images))?count($animal_images):0;//echo $count_photos;die;
			   		if(isset($animal_images) && !empty($animal_images) && !$this->session->userdata('last_campaign_id')) {
						$i=1;$j=5;
						foreach($animal_images as $row) {
                ?>
                
                <div class="thumbnail-wrapp crop_photos" data-thumb-id="<?php echo $row['in_file_id']; ?>"> 
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader<?php echo $row['in_file_id']; ?>">
                    <div class="fileinput fileinput-new12" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview<?php echo $j; ?>">
                        <?php if($row['st_file_type'] == 'P') { ?>
                        <img src="<?php echo $this->config->item('upload_url'); ?>animal_images/140x140/<?php echo $row['st_file_name']; ?>" alt="<?php echo $row['st_file_name']; ?>" title="<?php echo $row['st_file_name']; ?>">
                        <?php } else { ?>
                        <img src="<?php echo $row['st_file_name']; ?>" title="<?php echo $row['st_file_name']; ?>" alt="<?php echo $row['st_file_name']; ?>">
                        <?php } ?>
                      </div>
                      
                      <div class="uploader-labl marb5 add_photo_btn<?php echo $j; ?>" style="clear:both;display:none;"> <a href="javascript:void(0);" class="btn default w100p remove_images_default" data-img-type="<?php echo $row['st_file_type'];?>" data-inc-id="<?php echo $i; ?>" data-file="<?php echo $row['st_file_name']; ?>" data-id="<?php echo $row['in_file_id']; ?>"> <span class="remove_pic" id="photo_rem<?php echo $j; ?>"><i class="material-icons">close</i></span> </a>
                        <?php /*?><span" class="btn default btn-file fileinput-new light-green remove_images" title="Add Photo"><span class="fileinput-new">Remove</span><?php */?>
                        <img id="loadimg_<?php echo $row['in_file_id']; ?>" style="display:none;" src="<?php echo base_url(); ?>assets/img/ajax-loading.gif" alt="loader" /> </span> </div>
                        
                        
                      <?php if($row['st_file_type'] == 'P') { ?>
                      <div class="radio-btn" style="clear:both;display:block;">                      
                        <input type="radio" name="set_default" data-file-name="<?php echo $row['st_file_name']; ?>" data-file-id="<?php echo $row['in_file_id']; ?>" class="default_check update_default_check"  id="set_default<?php echo $j; ?>" value="photo<?php echo $j; ?>"
                        <?php if($row['in_profile_pic'] == 1)echo "checked"; ?> />
						  <label for="set_default<?php echo $j; ?>" class="default_pic default_pic_check" id="profile_pic<?php echo $j; ?>">Set as Profile</label></div>
                        <?php //if($row['in_profile_pic'] == 1)echo "checked"; ?>
                      <input type="hidden" name="set_default_edit" id="set_default_edit_<?php echo $row['in_file_id']; ?>" value="">
                      <?php } ?>
                      <?php /*?><span class="remove_pic" id="photo_rem<?php echo $j; ?>" style="display:none;"> 
                                <i class="fa fa-picture-o"></i> Remove
                        	</span><?php */?>
                    </div>
                  </div>
                </div>
                
                <?php if($row['st_file_type'] == 'P') { ?>
                 <input type="hidden" name="animal_photo[]" id="animal_photo_<?php echo $row['in_file_id']; ?>" value="<?php echo $row['st_file_name']; ?>">
                 
                 <input type="hidden" name="animal_photo_name[]" id="animal_photo_name_<?php echo $row['in_file_id']; ?>" value="<?php echo $row['st_file_name']; ?>">
                <?php } else { ?>
                <input type="hidden" name="animal_video[]" id="animal_video_<?php echo $row['in_file_id']; ?>" value="<?php echo $row['st_file_name']; ?>">
                 
                 <input type="hidden" name="animal_video_name[]" id="animal_video_name_<?php echo $row['in_file_id']; ?>" value="<?php echo $row['st_file_name']; ?>">
                <?php } ?>
                <!--End Image File Uploader-->
                
                <?php
							$i++;
							$j++;
							}
						}
					}
				?>
                <input type="hidden" class="set_profile_pic" name="set_profile_pic" value="" /> 
                <input type="hidden" class="set_profile_pic_custom" name="set_profile_pic_custom" value="" />
                    
                <input type="hidden" name="animal_photo_js[]" id="animal_photo_js" value="">
                <input type="hidden" name="animal_video_js[]" id="animal_video_js" value="">            
                <div class="thumbnail-wrapp"> 
                  
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader1" style="display:none;">
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview1" > </div>
                      <?php /*?>  <div class="col-xs-12 col-sm-3">
                                        <div class="eg-preview clearfix">
                                          <div class="preview preview-md fileinput-thumbnail image_preview1" id="preview_crop_1" name="preview_crop_1"></div>
                                        </div>
                                    </div>
                                    <?php */?>
                      <div class="uploader-labl add_photo_btn1"> <span class="btn default btn-file fileinput-new orange-btn"> <span class="fileinput-new"><i class="material-icons">image</i> Add Photo</span> <span class="fileinput-exists"> Change </span>
                        <input type="file" name="photo1" id="photo1" onChange="campaignreadURL(this)"> 
                        </span> </div>
                        <span class="remove_pic" id="photo_rem1" style="display:none;"><i class="material-icons">close</i></span>
                        <div class="radio-btn" style="clear:both;display:block;">                      
                        <input type="radio" name="set_default" class="default_check default_check_pic" id="set_default1" value="photo1" />
                        <label class="default_pic" id="profile_pic1" for="set_default1">Set as Profile</label>
						</div>
                       <a class="link-video btn orange-btn fileinput-new" id="link-video1" href="#youtube-url1" data-toggle="modal"><i class="material-icons">videocam</i> Add Video</a> </div>
                  </div>
                  <!--End Image File Uploader--> 
                  
                  <!--Being Video Youtube Link Uploader-->
                  <div class="videoinput-btnset" id="pro-video-uploader1" style="display:none">
                    <div class="videoinput videoinput-exists">
                      <div class="videoinput-thumbnail videoinput-preview1 video-thumbnail"> <img src="http://img.youtube.com/vi/LmL_f38ckbQ/default.jpg"> </div>
                      <div class="uploader-labl"> <a href="javascript:void(0);" class="btn default videoinput-exists width-full" id="youtube-link-remove1"> <span class="remove_pic"><i class="material-icons">close</i></span> </a> </div>
                    </div>
                  </div>
                  <!--End Video Youtube Link Uploader--> 
                  
                </div>
                
                <!-- 2 -->
                <div class="thumbnail-wrapp"> 
                  
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader2" style="display:none;">
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview2" > </div>
                      <div class="uploader-labl add_photo_btn2"> <span class="btn default btn-file fileinput-new orange-btn"> <span class="fileinput-new"><i class="material-icons">image</i> Add Photo</span> <span class="fileinput-exists"> Change </span>
                        <input type="file" name="photo2" id="photo2" onChange="campaignreadURL(this)"> 
                        </span> </div>
                        <span class="remove_pic" id="photo_rem2" style="display:none;"><i class="material-icons">close</i></span>
                        <div class="radio-btn" style="clear:both;display:block;">                      
                        <input type="radio" name="set_default" class="default_check default_check_pic" id="set_default2" value="photo2" />
                        <label class="default_pic" id="profile_pic2" for="set_default2">Set as Profile </label>
						</div>
                       <a class="link-video btn orange-btn fileinput-new" id="link-video2" href="#youtube-url2" data-toggle="modal"><i class="material-icons">videocam</i> Add Video</a> </div>
                  </div>
                  <!--End Image File Uploader--> 
                  
                  <!--Being Video Youtube Link Uploader-->
                  <div class="videoinput-btnset" id="pro-video-uploader2" style="display:none">
                    <div class="videoinput videoinput-exists" >
                      <div class="videoinput-thumbnail videoinput-preview2 video-thumbnail"> <img src="http://img.youtube.com/vi/LmL_f38ckbQ/default.jpg"> </div>
                      <div class="uploader-labl"> <a href="javascript:void(0);" class="btn default videoinput-exists width-full" id="youtube-link-remove2"> <span class="remove_pic"><i class="material-icons">close</i></span></a> </div>
                    </div>
                  </div>
                  <!--End Video Youtube Link Uploader--> 
                  
                </div>
                <!-- --> 
                
                <!-- 3 -->
                <div class="thumbnail-wrapp"> 
                  
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader3" style="display:none;">
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview3" > </div>
                      <div class="uploader-labl add_photo_btn3"> <span class="btn default btn-file fileinput-new orange-btn"> <span class="fileinput-new"><i class="material-icons">image</i> Add Photo</span> <span class="fileinput-exists"> Change </span>
                        <input type="file" name="photo3" id="photo3" onChange="campaignreadURL(this)"> 
                        </span> </div>
                        <span class="remove_pic" id="photo_rem3" style="display:none;"><i class="material-icons">close</i></span>
                         <div class="radio-btn" style="clear:both;display:block;"> 
                         <input type="radio" name="set_default" class="default_check default_check_pic" id="set_default3" value="photo3" />
                        <label class="default_pic" id="profile_pic3" for="set_default3">Set as Profile </label>
						</div>
                       <a class="link-video btn orange-btn fileinput-new" id="link-video3" href="#youtube-url3" data-toggle="modal"><i class="material-icons">videocam</i> Add Video</a> </div>
                  </div>
                  <!--End Image File Uploader--> 
                  
                  <!--Being Video Youtube Link Uploader-->
                  <div class="videoinput-btnset" id="pro-video-uploader3" style="display:none">
                    <div class="videoinput videoinput-exists" >
                      <div class="videoinput-thumbnail videoinput-preview3 video-thumbnail"> <img src="http://img.youtube.com/vi/LmL_f38ckbQ/default.jpg"> </div>
                      <div class="uploader-labl"> <a href="javascript:void(0);" class="btn default videoinput-exists width-full" id="youtube-link-remove3"> <span class="remove_pic"><i class="material-icons">close</i></span> </a> </div>
                    </div>
                  </div>
                  <!--End Video Youtube Link Uploader--> 
                  
                </div>
                <!-- --> 
                
                <!-- 4 -->
                <div class="thumbnail-wrapp"> 
                  
                  <!--Being Image File Uploader-->
                  <div class="fileinput-btnset" id="pro-img-uploader4" style="display:none;">
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                      <div class="fileinput-thumbnail fileinput-preview thumbnail image_preview4" > </div>
                      <div class="uploader-labl add_photo_btn4"> <span class="btn default btn-file fileinput-new orange-btn"> <span class="fileinput-new"><i class="material-icons">image</i> Add Photo</span> <span class="fileinput-exists"> Change </span>
                        <input type="file" name="photo4" id="photo4" onChange="campaignreadURL(this)"> 
                        </span> </div>
                        <span class="remove_pic" id="photo_rem4" style="display:none;"><i class="material-icons">close</i></span>
                       <div class="radio-btn" style="clear:both;display:block;">                       
                        <input type="radio" name="set_default" class="default_check default_check_pic" id="set_default4" value="photo4" />
                        <label class="default_pic" id="profile_pic4" for="set_default4">Set as Profile </label>
                       <a class="link-video btn orange-btn fileinput-new" id="link-video4" href="#youtube-url4" data-toggle="modal"><i class="material-icons">videocam</i> Add Video</a> </div>
                  </div>
                  <!--End Image File Uploader--> 
                  
                  <!--Being Video Youtube Link Uploader-->
                  <div class="videoinput-btnset" id="pro-video-uploader4" style="display:none">
                    <div class="videoinput videoinput-exists">
                      <div class="videoinput-thumbnail videoinput-preview4 video-thumbnail"> <img src="http://img.youtube.com/vi/LmL_f38ckbQ/default.jpg"> </div>
                      <div class="uploader-labl"> <a href="javascript:void(0);" class="btn default videoinput-exists width-full" id="youtube-link-remove4"> <span class="remove_pic"><i class="material-icons">close</i></span> </a> </div>
                    </div>
                  </div>
                  <!--End Video Youtube Link Uploader--> 
                  
                </div>
                <!-- --> 
                
              </div>
            </div>
		  </div> 
		  </div>
		   <div class="gr-wrap col-md-12 col-sm-12 col-xs-12 no-space">
<div class="paypal-pay-info">
              <div class="gr-wrap col-md-12 no-space padr0">
                <div class="form-group">
                  <label class="control-label txtpaypalid" for="txtpaypalid_email">Enter your PayPal Email ID: 
                  <?php if($this->session->userdata('campaign_type') == 'D') { ?>
                  <?php } ?>
                  </label>
                  <input type="text" class="form-control w270 in-block" id="txtpaypalid_email" name="txtpaypalid" maxlength="250" value="<?php echo isset($get_campaign_detail[0]['st_paypal_email'])?$get_campaign_detail[0]['st_paypal_email']:$this->input->post('txtpaypalid'); ?>" onBlur="save_data();">
					<span class="paypal-small-text">(If you do not know the PayPal ID at this time, you can leave this blank but you will need to know it when you Confirm the pledges so the money can be collected.)</span>
                </div>
                <span class="paypal">Don't have a PayPal account yet? <a href="http://www.paypal.com/" target="_blank">Create PayPal account</a> </span>
                <div class="clear"></div>                
              </div>
              <?php if($this->session->userdata('campaign_type') == 'P') { ?>
              <!--<div class="col-md-6 no-right-space paypal-id-text">
              	<p>(If you do not know the PayPal ID at this time, you can leave this blank but you will need to know it when you Confirm the pledges so the money can be collected.)</p>
              </div>-->
              <?php } ?>
            </div>
</div>
		  
         </div>
          <div class="clearfix"></div>
        </div>
        <?php /*?><a title="Continue &gt;" name="continue" id="continue" href="#" class="btn pink-btn">
Continue <i class="fa fa-angle-right"></i>
</a><?php */?>
        <div class="text-center">
          <button type="submit" name="continue" id="continue" class="btn btn-big orange waves-effect waves-light padr10"> Continue <i class="material-icons font-24">keyboard_arrow_right</i> </button>
          <img id="loadimg" style="display:none;" src="<?php echo base_url(); ?>assets/img/ajax-loading.gif" alt="loader" /> </div>
        <div class="clearfix"></div>
        <div class="col-md-12 col-sm-12 col-xs-12 text-center">
						<ul class="progress-dots">
						<li class="current"><i class="material-icons">fiber_manual_record</i></li>
						<li class="current"><i class="material-icons">fiber_manual_record</i></li>
						<li><i class="material-icons">fiber_manual_record</i></li>
						<li><i class="material-icons">fiber_manual_record</i></li>
						</ul>
					</div>
      </div>
     
      
      <input type="hidden" name="frm_action" id="frm_action" value="add_campaign" />
        <input type="hidden" name="campaign_id" id="campaign_id" value="<?php echo ($this->session->userdata('last_campaign_id')==true)?$this->session->userdata('last_campaign_id'):((isset($get_campaign_detail[0]['in_campaign_id']))?$get_campaign_detail[0]['in_campaign_id']:''); ?>">
        <input type="hidden" id="rotate_angle1" name="rotate_angle1" value="0"/>
        <input type="hidden" id="crop_x1" name="x1"/>
        <input type="hidden" id="crop_y1" name="y1"/>
        <input type="hidden" id="crop_w1" name="w1"/>
        <input type="hidden" id="crop_h1" name="h1"/>
        <input type="hidden" id="rotate_angle2" name="rotate_angle2" value="0"/>
        <input type="hidden" id="crop_x2" name="x2"/>
        <input type="hidden" id="crop_y2" name="y2"/>
        <input type="hidden" id="crop_w2" name="w2"/>
        <input type="hidden" id="crop_h2" name="h2"/>
        <input type="hidden" id="rotate_angle3" name="rotate_angle3" value="0"/>
        <input type="hidden" id="crop_x3" name="x3"/>
        <input type="hidden" id="crop_y3" name="y3"/>
        <input type="hidden" id="crop_w3" name="w3"/>
        <input type="hidden" id="crop_h3" name="h3"/>
        <input type="hidden" id="rotate_angle4" name="rotate_angle4" value="0"/>
        <input type="hidden" id="crop_x4" name="x4"/>
        <input type="hidden" id="crop_y4" name="y4"/>
        <input type="hidden" id="crop_w4" name="w4"/>
        <input type="hidden" id="crop_h4" name="h4"/>
        <input type="hidden" name="url_link_one" 	id="url_link_one" 	value="" />
        <input type="hidden" name="url_link_two" 	id="url_link_two" 	value="" />
        <input type="hidden" name="url_link_three" 	id="url_link_three"	value="" />
        <input type="hidden" name="url_link_four" 	id="url_link_four" 	value="" />
        <input type="hidden" name="breed_string" id="breed_string" value="" />
        <input type="hidden" name="type_string" id="type_string" value="" />
        <input type="hidden" name="image_file" id="image_file">
        <input type="hidden" name="file_to_upload" id="file_to_upload">
        <input type="hidden" name="uploaded_photo1" id="uploaded_photo1" value="" />
        <input type="hidden" name="uploaded_photo2" id="uploaded_photo2" value="" />
        <input type="hidden" name="uploaded_photo3" id="uploaded_photo3" value="" />
        <input type="hidden" name="uploaded_photo4" id="uploaded_photo4" value="" />
        <input type="hidden" name="profile_display" id="profile_display">
        <input type="hidden" name="add_fundraiser_crop_upload_path" id="add_fundraiser_crop_upload_path" value="<?php echo base_url(); ?>sponsorship/ajax_file_upload" />
        <input type="hidden" name="add_fundraiser_cropped_image_upload_path" id="add_fundraiser_cropped_image_upload_path" value="<?php echo base_url(); ?>add_fundraiser/cropped_image_ajax_file_upload" />
        <input type="hidden" name="rotate_path" id="rotate_path" value="<?php echo base_url(); ?>sponsorship/rotate_image" />
      	<input type="hidden" name="sess_animal_campaign_id" id="sess_animal_campaign_id" value="" >
    </form>
     <!-- END PAGE CONTENT--> 
  </div>
</div>
								</div>
						</div><!-- .entry-content -->
					</article><!-- #post-## -->
                </div>
            </div>
        </div>
</section>
<!-- END CONTAINER -->
<?PHP include APPPATH."views/inc/footer-dashboard.php" ?>
<?PHP //include $this->config->item('front_view_path')."youtube_url_popup.php"; 
include APPPATH."views/youtube_url_popup.php";
?>
<div id="responsive">
  <div class="modal fade" id="crop_img_popup1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog message-modal">
      <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close cancel_close1" type="button"></button>
          <h4 class="modal-title">Animal Photo</h4>
        </div>
        <div class="modal-body">
          <div class="scroller crop-scroller" data-always-visible="1" data-rail-visible1="1" style="height:100%;">
            <p>Select an area of an image and then click on Save Photo button to save photo.<img id="ajax-loader-bar-rotate1" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></p>
            <div class="crop-img-here1"> <img id="ajax-loader-bar1" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/> </div>
          </div>
        </div>
        <div class="modal-footer text-center no-margin">
          <button class="btn orange add_fundraiser_save_popup1" style="display:none;" data-dismiss="modal" onClick="javascript:void(0);" type="button">Save Photo</button>
          <button class="btn black add_fundraiser_cancel_popup1" data-dismiss="modal" onClick="javascript:void(0);" type="button">Cancel</button>
        </div>
      </div>
      <!-- /.modal-content --> 
    </div>
    <!-- /.modal-dialog --> 
  </div>
</div>
<!-- Photo Popup2 -->
<div id="responsive">
  <div class="modal fade" id="crop_img_popup2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog message-modal">
      <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close cancel_close2" type="button"></button>
          <h4 class="modal-title">Animal Photo</h4>
        </div>
        <div class="modal-body">
          <div class="scroller crop-scroller" data-always-visible="1" data-rail-visible1="1" style="height:100%;">
            <p>Select an area of an image and then click on Save Photo button to save photo.<img id="ajax-loader-bar-rotate2" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></p>
            <div class="crop-img-here2"><img id="ajax-loader-bar2" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></div>
          </div>
        </div>
        <div class="modal-footer text-center no-margin">
          <button class="btn orange add_fundraiser_save_popup2" style="display:none;" data-dismiss="modal" onClick="javascript:void(0);" type="button">Save Photo</button>
          <button class="btn black add_fundraiser_cancel_popup2" data-dismiss="modal" onClick="javascript:void(0);" type="button">Cancel</button>
        </div>
      </div>
      <!-- /.modal-content --> 
    </div>
    <!-- /.modal-dialog --> 
  </div>
</div>

<!-- Photo Popup3 --> 
<div id="responsive">
  <div class="modal fade" id="crop_img_popup3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog message-modal">
      <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close cancel_close3" type="button"></button>
          <h4 class="modal-title">Animal Photo</h4>
        </div>
        <div class="modal-body">
          <div class="scroller crop-scroller" data-always-visible="1" data-rail-visible1="1" style="height:100%;">
            <p>Select an area of an image and then click on Save Photo button to save photo.<img id="ajax-loader-bar-rotate3" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></p>
            <div class="crop-img-here3"><img id="ajax-loader-bar3" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></div>
          </div>
        </div>
        <div class="modal-footer text-center no-margin">
          <button class="btn orange add_fundraiser_save_popup3" style="display:none;" data-dismiss="modal" onClick="javascript:void(0);" type="button">Save Photo</button>
          <button class="btn black add_fundraiser_cancel_popup3" data-dismiss="modal" onClick="javascript:void(0);" type="button">Cancel</button>
        </div>
      </div>
      <!-- /.modal-content --> 
    </div>
    <!-- /.modal-dialog --> 
  </div>
</div>

<!-- Photo Popup4 -->
<div id="responsive">
  <div class="modal fade" id="crop_img_popup4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog message-modal">
      <div class="modal-content">
        <div class="modal-header">
          <button aria-hidden="true" data-dismiss="modal" class="close cancel_close4" type="button"></button>
          <h4 class="modal-title">Animal Photo</h4>
        </div>
        <div class="modal-body">
          <div class="scroller crop-scroller" data-always-visible="1" data-rail-visible1="1" style="height:100%;">
            <p>Select an area of an image and then click on Save Photo button to save photo.<img id="ajax-loader-bar-rotate4" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></p>
            <div class="crop-img-here4"><img id="ajax-loader-bar4" src="<?php echo base_url(); ?>assets/img/ajax-loader-bar.gif" alt="image" style="display:none;"/></div>
          </div>
        </div>
        <div class="modal-footer text-center no-margin">
          <button class="btn orange add_fundraiser_save_popup4" style="display:none;" data-dismiss="modal" onClick="javascript:void(0);" type="button">Save Photo</button>
          <button class="btn black add_fundraiser_cancel_popup4" data-dismiss="modal" onClick="javascript:void(0);" type="button">Cancel</button>
        </div>
      </div>
      <!-- /.modal-content --> 
    </div>
    <!-- /.modal-dialog --> 
  </div>
</div>


<!-- BEGIN JAVASCRIPTS --> 
<script src="<?php echo base_url(); ?>assets/plugins/jquery-validation/dist/jquery.validate.min.js" type="text/javascript"></script> 
<!--Date Picker--> 
<script type="text/javascript" src="<?php echo base_url(); ?>assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script> 
<script src="<?php echo base_url(); ?>assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script> 
<script src="<?php echo base_url(); ?>assets/scripts/custom/components-pickers.js"></script> 
<script>
	jQuery(document).ready(function() {       
	   // initiate layout and plugins
	   ComponentsPickers.init();
	  		$('.datepicker-icon').find('.from-date-icon').on('click', function(){
	   		$('#from_date').trigger('focus');
		    });		
			$('.datepicker-icon').find('.to-date-icon').on('click', function(){
				$('#to_date').trigger('focus');
			});
	});   
</script> 
<script type="text/javascript">
$(document).ready(function(e) {
	$('#txtpagetitle').focus();
	
	jQuery.validator.addMethod("specialChars", function( value, element ) {
        var regex = new RegExp("^[a-zA-Z0-9-_]+$");
        var key = value;

        if (!regex.test(key)) {
           return false;
        }
        return true;
    }, "Special characters are not allowed in the URL");

$('#campaign').validate({
		errorElement: 'span', //default input error message container
		errorClass: 'help-inline', // default input error message class
		focusInvalid: true, // do not focus the last invalid input
		rules: {
			txtpagetitle:{
				required:true
			},
			from:{
				required:true
			},
			to:{
				required:true
			},
			txtcustomurl:{
				required:true,
				specialChars:true,
				remote: {
					 url: "<?php echo base_url(); ?>sponsorship/check_custom_url",
					 type: "post",
					 beforeSend:function(){
					  	$('#loader').show();
					 },
					 data: {
					  txtcustomurl: function() {
						return $( "#txtcustomurl" ).val();
					  },
					  campaign_id : $('#campaign_id').val()
					 },
					 complete:function(){
						$('#loader').hide();
					 }/*,
					 success:function(data){
						 //alert(data)
						 console.log(data);
					 }*/
				}
			},
			<?php if($this->session->userdata('campaign_type') == 'D') { ?>
			txtpaypalid:{
				required:true,
				email:true
			},
			<?php } ?>
			txtpagestorytitle:{
				required:
				{
					depends: function(){
							if($('#enternew').is(':checked') == true){ 
								return true;
							} else {
								return false;
							}
						}
				}
				
			},
			txtstorytitle:{
				required:true
			}
		},
		messages: {
			txtpagetitle:{
				required:'Please enter page title.'
			},
			from:{
				required:'Please enter from date.'
			},
			to:{
				required:'Please enter to date.'
			},
			txtcustomurl:{
				required:'Please enter custom url.',
				specialChars:'Special Charecters are not allowed.',
				remote:'URL already exist, please specify another one.'
			},
			<?php if($this->session->userdata('campaign_type') == 'D') { ?>
			txtpaypalid:{
				required:'Please enter email.',
				email:'Please enter valid email.'
			},
			<?php } ?>
			txtpagestorytitle:{
				required:'Please enter page profile story.'
			},
			txtstorytitle:{
				required:"Please enter page story title."
			}
		},

		invalidHandler: function (event, validator) { //display error alert on form submit   
			$('#campaign').show();
			
			var errors = validator.numberOfInvalids();
			if (errors) {
			  var message = errors == 1
				? 'You missed 1 field. It has been highlighted'
				: 'You missed ' + errors + ' fields. They have been highlighted';
			  alert(message);
			}
		},

		highlight: function (element) { // hightlight error inputs
			$(element)
				.closest('.form-group').addClass('has-error'); // set error class to the control group
		},

		success: function (span) { 
			span.closest('.form-group').removeClass('has-error');
			span.remove();
		},
		errorPlacement: function (error, element) { 
			//error.addClass('help-small no-left-padding').insertAfter(element.closest('.form-group'));
			//error.addClass('help-block').insertAfter(element.closest('.input-group'));
			error.addClass('help-block').insertAfter(element.closest('.form-control'));//For Other Normal Fileds
			
			if (element.attr("name") == "from") {
				error.insertAfter('.from-date-sel');	
			}
			if (element.attr("name") == "to") {
				error.insertAfter('.to-date-sel');
			}
			
		}
	});
	
	//$('.update_default_check').live('click',function(){
	  $('.update_default_check').click(function(){	
		var file_id = $(this).attr('data-file-id');
		var file_name = $(this).attr('data-file-name');
		
		$('#set_default_edit_'+file_id).attr('value','');
		$("input[name='set_default_edit']").val(file_id);
		
		$('.set_profile_pic_custom').val(file_name);
		$('.set_profile_pic').val('');
	});
	
	//$('.remove_images').live('click',function() {
	  $('.remove_images').click(function() {	
	var file_id = $(this).attr('data-id');
	var file_name = $(this).attr('data-file');
	var thumb_id = $(this).attr('data-inc-id');
	
	var confirm_file_del = confirm('Are you sure you want to delete this file?');
	
	
	if(confirm_file_del == true) {
		
		$.ajax({
			type: "POST",
			url: '<?php echo base_url(); ?>sponsorship/delete_file',
			beforeSend: function(){
				$('#loadimg_'+file_id).show();
				$(this).hide(); 
			},
			data: {
				file_id : file_id,
				file_name : file_name
			},
			dataType:"html",
			complete: function(){
				$('#loadimg_'+file_id).hide();
				$(this).show(); 
			}
		});
		
		$(this).closest('.thumbnail-wrapp').hide();
		
		$('#pro-img-uploader'+thumb_id).closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader'+thumb_id).show();
		
		var thumbnail_length = $('.remove_images:visible').length;
		//console.log(thumbnail_length);
		if(thumbnail_length == 0) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader1').show();
			//console.log('0 => '+thumbnail_length);
			
			//if($.trim($('.image_preview2').html()) == '') {
				$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader2').hide();
			//} else {
				//$('#pro-img-uploader2').closest('.thumbnail-wrapp').show();
				//$('#pro-img-uploader2').show();
			//}
			
			//if($.trim($('.image_preview3').html()) == '') {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader3').hide();
			//} else {
				//$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
			//	$('#pro-img-uploader3').show();
			//}
			
			//if($.trim($('.image_preview4').html()) == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			//} else {
				//$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				//$('#pro-img-uploader4').show();
			//}
			
		} else if(thumbnail_length == 1) {
			//console.log('1 => '+thumbnail_length);return false;
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader2').show();
			
			if($.trim($('.image_preview3').html()) == '') {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader3').hide();
			} else {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader3').show();
			}
			
			if($.trim($('.image_preview4').html()) == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			} else {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader4').show();
			}

			
		} else if(thumbnail_length == 2) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader2').hide();
			
			$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader3').show();
			
			if($('.image_preview4').html() == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			} else {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader4').show();
			}
		} else if(thumbnail_length == 3) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader2').hide();
			
			$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader3').hide();
			
			$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader4').show();
		}
	}
	
	});
});
var array_photo = [];
var array_video = [];
//$('.remove_images_default').live('click',function() {
  $('.remove_images_default').click(function() {	
	
	var file_id = $(this).attr('data-id');
	var file_name = $(this).attr('data-file');
	var thumb_id = $(this).attr('data-inc-id');
	
	var data_animal_photo = $(this).attr('data-file');
	var data_img_type = $(this).attr('data-img-type');
	
	
	if(data_img_type == 'P') {
		array_photo.push(data_animal_photo);
		$("input[name='animal_photo_js[]']").val(array_photo);
	} else if(data_img_type == 'V') {
		array_video.push(data_animal_photo);
		$("input[name='animal_video_js[]']").val(array_video);
	}
	
	var confirm_file_del = confirm('Are you sure you want to remove this file?');
	
	if(confirm_file_del == true) {
		$(this).closest('.thumbnail-wrapp').remove();
		
		$('#pro-img-uploader'+thumb_id).closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader'+thumb_id).show();
		
		var thumbnail_length = $('.remove_images_default:visible').length;
		//console.log(thumbnail_length);
		if(thumbnail_length == 0) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader1').show();
			//console.log('0 => '+thumbnail_length);
			
			//if($.trim($('.image_preview2').html()) == '') {
				$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader2').hide();
			//} else {
				//$('#pro-img-uploader2').closest('.thumbnail-wrapp').show();
				//$('#pro-img-uploader2').show();
			//}
			
			//if($.trim($('.image_preview3').html()) == '') {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader3').hide();
			//} else {
				//$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
			//	$('#pro-img-uploader3').show();
			//}
			
			//if($.trim($('.image_preview4').html()) == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			//} else {
				//$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				//$('#pro-img-uploader4').show();
			//}
			
		} else if(thumbnail_length == 1) {
			//console.log('1 => '+thumbnail_length);return false;
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader2').show();
			
			if($.trim($('.image_preview3').html()) == '') {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader3').hide();
			} else {
				$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader3').show();
			}
			
			if($.trim($('.image_preview4').html()) == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			} else {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader4').show();
			}

			
		} else if(thumbnail_length == 2) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader2').hide();
			
			$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader3').show();
			
			if($('.image_preview4').html() == '') {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').hide();
				$('#pro-img-uploader4').hide();
			} else {
				$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
				$('#pro-img-uploader4').show();
			}
		} else if(thumbnail_length == 3) {
			$('#pro-img-uploader1').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader1').hide();
			
			$('#pro-img-uploader2').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader2').hide();
			
			$('#pro-img-uploader3').closest('.thumbnail-wrapp').hide();
			$('#pro-img-uploader3').hide();
			
			$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
			$('#pro-img-uploader4').show();
		}
	}
	
});

$(window).on('load',function() {
	var count_blocks = '';
	<?php if($this->session->userdata('last_campaign_id')) { ?>
	var count_blocks ='<?php echo (isset($campaign_images))?count($campaign_images):''; ?>';
	<?php } ?>
	
	<?php if(!$this->session->userdata('last_campaign_id')) { ?>
	var count_blocks ='<?php echo (isset($animal_images))?count($animal_images):''; ?>';
	<?php } ?>
	
	if(count_blocks == 0) {
		$('#pro-img-uploader1').closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader1').show();
	} else if(count_blocks == 1) {
		$('#pro-img-uploader2').closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader2').show();
	} else if(count_blocks == 2) {
		$('#pro-img-uploader3').closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader3').show();
	} else if(count_blocks == 3) {
		$('#pro-img-uploader4').closest('.thumbnail-wrapp').show();
		$('#pro-img-uploader4').show();
	}
	
	var set_profile_pic = $('.update_default_check:checked').attr('data-file-name');
	$('.set_profile_pic').val(set_profile_pic);
	
});

</script> 
<script src="<?php echo base_url(); ?>assets/custom_jquery/sponsorship_add.js"></script> 
<!--<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script> -->
<script type="text/javascript" src="<?php echo base_url(); ?>assets/ajaxfileupload.js"></script> 
<script src="<?php echo base_url(); ?>assets/custom_photo_video.js" type="text/javascript" ></script> 
<script src="<?php echo base_url(); ?>assets/cropper.js" type="text/javascript" ></script> 
<script src="<?php echo base_url(); ?>assets/custom_jquery/campaign_photo.js" type="text/javascript"></script> 
<!--Date Picker--> 

<script type="text/javascript">         
		
		function save_data()
		{ 	
			//alert('asdasdasdasd');
			var sess_animal_campaign_id	=	$("#sess_animal_campaign_id").val();
			//alert('campaign_id'+campaign_id);		
			var campaign_id	=	$("#campaign_id").val();
			var page_title	=	$("#txtpagetitle").val();
			var story_title	=	$("#txtstorytitle").val();
			var profile_title	=	$("#txtpagestorytitle").val();
			var custom_url	=	$("#txtcustomurl").val();
			var paypal_email_id	=	$("#txtpaypalid_email").val();
			var cost_description1 = 	$("#cost-description1").val();
			var cost_price1 = 	$("#cost1").val();
			//var cost_price2 = $("[name=cost_price2[]]").val();
			//var cost_price2 = [];
			var cost_price_new = document.getElementsByName("cost_price2[]").length;
			//var cost_price2 = document.getElementsByName("cost_price2[]").value;
			
			//var cost_price2 = $("[name='cost_price2[]']")[0];
			var cost_price1_new_cnt = document.getElementsByName("cost_price1[]").length;
			
			var cost_desc1_new = $("input[name='cost_desc1[]']")
              .map(function(){return $(this).val();}).get();
			 
			var cost_price1_new = $("input[name='cost_price1[]']")
              .map(function(){return $(this).val();}).get();
			    
			var cost_desc2 = $("input[name='cost_desc2[]']")
              .map(function(){return $(this).val();}).get();
			  
			var cost_price2 = $("input[name='cost_price2[]']")
              .map(function(){return $(this).val();}).get();
			  
			var to_date = 	$("#to_date").val(); 
			
			var from_date = $("#from_date").val(); 
			  
			var myData={"page_title":page_title,"story_title":story_title,"profile_title":profile_title,"to_date":to_date,"from_date":from_date,"custom_url":custom_url,"paypal_email_id":paypal_email_id,'cost_description1': cost_description1,'cost_price1': cost_price1,'cost_desc2':cost_desc2,'cost_price2': cost_price2,'cost_desc1_new':cost_desc1_new,'cost_price1_new': cost_price1_new,'cost_price1_new_cnt':cost_price1_new_cnt,'cost_price_new':cost_price_new,'campaign_id':campaign_id};
			
			console.log(myData);
								
			if(page_title !='' || story_title !='' || profile_title !='' || custom_url !='' || paypal_email_id !='')
			{  		
				$.ajax({
						type: "POST",
						url: '<?php echo base_url(); ?>sponsorship/save_animal_fundraiser',
						data: myData, 						
						dataType:"html",
						success:function(data) {
							  //alert(data); 
							  //return false;
							  //alert('Mail sent successfully.');
							  if(data)
							  {
								$("#sess_campaign_id").val(data);
								$("#campaign_id").val(data);
								//alert($("#sess_campaign_id").val());
								
							  	//alert(data);
								//return false;
							  }
						}
					});
			}
		}
		
		function delete_cost_record(cost_id)
		{
			//alert(cost_id);
			var campaign_id	=	$("#campaign_id").val();
			//alert(campaign_id);
			var myData={"cost_id":cost_id,'campaign_id':campaign_id};
			$.ajax({
						type: "POST",
						url: '<?php echo base_url(); ?>add_fundraiser/delete_fundraiser_cost',
						data: myData, 						
						dataType:"html",
						success:function(data) {
							  //alert(data); 
							  //return false;
							  //alert('Mail sent successfully.');
							  if(data)
							  {
								//alert($("#sess_campaign_id").val());
								
							  	//alert(data);
								//return false;
							  }
						}
					});	
		} 		
</script>

<script>
	jQuery(document).ready(function() {       
	 	var animal_profile_story = $('#animal_profile_story').val();
		var animal_main_profile_story = $('#animal_main_profile_story').val();
		if(animal_main_profile_story !== animal_profile_story)
		{
			//alert('select new entry');
			$('#default').parent().removeClass('checked');
			$('#enternew').parent().addClass('checked');
			$('#txtpagestorytitle').removeAttr('readonly');
		}
	
		//$(".radio_check").live('click',function(){
		  $(".radio_check").click(function(){	
			var check_value = $('.radio_check:checked').val();
			if(check_value == 'option1')
			{
				$('#txtpagestorytitle').val($('#animal_main_profile_story').val());
			}
			if(check_value == 'option2')
			{
				$('#txtpagestorytitle').val($('#animal_profile_story').val());
			}
		})
		  
 $('#datepicker-icon.from').find('.from-date-icon').on('click', function(){
 	$('#from_date').trigger('focus');
 });
$('#datepicker-icon.to').find('.to-date-icon').on('click', function(){
 	$('#to_date').trigger('focus');
 });
		
});  
	
	 
</script> 

<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>