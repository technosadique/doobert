<?php
$base_url = $this->config->item('base_url');
//echo $this->session->userdata('orgtype');
?>
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<!-- BEGIN HEAD --><head>
    <meta charset="utf-8"/>
    <title>Search for Volunteer - Foster Home Volunteer</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
	<?php include 'inc/header-css-js.php';?>
	<?PHP //include "includes/head-links.php"; ?>
	 <link rel="stylesheet" type="text/css"  href="<?php echo base_url(); ?>assets/css/tipso.css">
     <!--<script type="text/javascript" src="//maps.googleapis.com/maps/api/js"></script>-->
     <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=<?php echo $this->config->item('googleapi_key'); ?>&sensor=false&libraries=geometry&language=en"></script>
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-fileinput/bootstrap-fileinput.css"/>
    <!-- END PAGE LEVEL STYLES -->

    <!-- Multiple file upload start -->
    <!-- Generic page styles -->
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/style.css">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-ui.css">
    <!-- CSS adjustments for browsers with JavaScript disabled -->

    
<noscript>
        <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-noscript.css">
    </noscript>
    <noscript>
        <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-ui-noscript.css">
    </noscript>
    <!-- Multiple file upload end -->
    <style type="text/css">
        #search-results {background:none;}
    </style>
</head>

    <?php
    if ($this->session->userdata('searchadmin1') != "")
        $keyword1 = $this->session->userdata('searchadmin1');
    else
        $keyword1 = "";

    if ($this->session->userdata('searchadmin2') != "")
        $keyword2 = $this->session->userdata('searchadmin2');
    else
        $keyword2 = "";

    if ($this->session->userdata('searchadmin3') != "")
        $keyword3 = $this->session->userdata('searchadmin3');
    else
        $keyword3 = "";

    if ($this->session->userdata('searchadmin4') != "")
        $keyword4 = $this->session->userdata('searchadmin4');
    else
        $keyword4 = "";

    if ($this->session->userdata('searchadmin5') != "")
        $keyword5 = $this->session->userdata('searchadmin5');
    else
        $keyword5 = "";

    if ($this->session->userdata('searchadmin6') != "")
        $keyword6 = $this->session->userdata('searchadmin6');
    else
        $keyword6 = "";
    ?>
    <!-- BEGIN BODY -->
<body class="page-header-fixed test-match-height test-rows test-responsive test-border-box test-margin test-padding test-border" onLoad="myFunction()">
        <div id="loader" style="display: none;"><img src="<?php echo base_url(); ?>assets/img/ajax-modal-loading.gif" width="32" height="32" align="absmiddle">&nbsp;<span id="loadertext">Loading...</span></div>
        <!--Menu Active Link-->
        <?php
        $tab = 10;
        $subtab = 10.1;
		$display_menu = 2;
        ?>
        <?php
        $breeds = array();
        ?>
        <!-- BEGIN HEADER -->
        <?PHP // include "includes/head-content-inside.php"; ?>
        <?PHP include APPPATH."views/inc/header-myaccount.php" ?>
        <?PHP //include "includes/head-content-login.php"; ?>
        <!-- END HEADER -->
        <div class="clearfix"></div>

        <section class="breadcrumb inner-breadcrumb">
            <div class="container">
                <div class="text-left">
                    <a href="<?php echo base_url(); ?>dashboard/">My Dashboard</a> <i class="fa fa-angle-right"></i>
                    <a href="<?php echo base_url(); ?>org-dashboard/">Org Dashboard</a> <i class="fa fa-angle-right"></i>Search for Volunteers
                </div>
            </div>
        </section>


    <section class="main-content-wrapper inner-wrapper search-for-volunteer">
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <article>
                        <div class="entry-content">
                            <div class="sub-content main-container clearfix">
                                <div class="col-md-12 col-sm-12 col-xs-12 no-space">
                                    <!-- Main content start -->

                                    <div class="row no-margin">
                                        <h1 class="text-center no-bdr">Search for Volunteers</h1>
                                    </div>

                                    <div class="col-md-12 col-sm-12 col-xs-12 no-space text-center clearfix">
										<div class="search_box">
                                            <div class="select-style">
												<select id="type-org" name="">
													<option value="inperson-volunteer-search">In-Person Volunteer</option>
													<option selected value="foster-home-volunteer-search">Foster Home Volunteer</option>
													<option value="photographer-volunteer-search">Photographer Volunteer</option>
													<option value="virtual-volunteer-search">Virtual Volunteer</option>
													<option value="lost-animal-volunteer-search">Lost Animal Volunteer</option>
												</select>
											</div>
											<!--<a href="javascript:void(0);" id="selectbox" class="btn orange-small">Search</a>-->
										</div>
                                    </div>


                                    <div class="main-content-wrapper inner-wrapper clearfix">
                                        <div class="page-content">
                                            <div class="row content-wrapper">

                                                <!-- BEING PAGE CONTENT-->
                                                <?php if (isset($success_msg)) { ?>
                                                    <div class="col-lg-12 no-space">
                                                        <div class="margin-bottom-15 info-streep"><?php echo $success_msg; ?></div>
                                                    </div>
                                                <?php } ?>

                                                <div class="row dobt-form no-margin foster-search common_searchbox">

                                                    <div class="search_term clearfix">
                                                        <form action="<?php echo base_url().'foster-home-volunteer-search'; ?>" method="post" name="foster-volunteer-search-form" id="my-profile">
                                                        <div class="gr-wrap required col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label" for="foster-zipcode">My Zipcode:</label>
                                                                <input type="text" class="form-control" id="foster-zipcode" name="txtsearchzipcode" value="<?php
                                                                if (isset($keyword1) && $keyword1 != '') {
                                                                    echo $keyword1;
                                                                } else {
                                                                  echo $this->session->userdata('zip');
                                                                }
                                                                ?>" maxlength="10">
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap required col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label" for="foster-radius">Radius to Search:</label>
                                                                <input type="text" class="form-control" id="foster-radius" name="txtsearchradius" value="<?php echo $keyword2; ?>" maxlength="250">
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label" for="animal-type">Animal Type:</label>
                                                                <!--<select class="form-control" id="foster-animal" name="foster-animal">-->
                                                                <div class="select-style">
                                                                <select class="form-control" id="animal-type" name="txtsearchanimaltype">
                                                                    <option value="">Select</option>
                                                                    <?php
                                                                    if (!empty($animal_type)) {
                                                                        foreach ($animal_type as $row) {
                                                                    ?>
                                                                            <option value="<?php echo $row['in_animal_type_id']; ?>" <?php echo ($row['in_animal_type_id'] == $keyword4) ? 'selected' : ''; ?>> <?php echo $row['st_animal_type_name']; ?> </option>
                                                                    <?php
                                                                        }
                                                                    }
                                                                    ?>
                                                                </select>
                                                                </div>
                                                            </div>
                                                        </div>
														<?php /* ?>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label durations" for="foster-duration">Durations Able to Foster For:</label>
                                                                <div class="select-style">
                                                                <select class="form-control" id="foster-duration" name="txtsearchduration">
                                                                    <option value="">Select</option>
                                                                    <option value="1" <?php echo ($keyword5 == '1') ? 'selected' : ''; ?>>Overnight Only (<24 hours)</option>
                                                                    <option value="2" <?php echo ($keyword5 == '2') ? 'selected' : ''; ?>>Short Term (24 hours to 7 days</option>
                                                                    <option value="3" <?php echo ($keyword5 == '3') ? 'selected' : ''; ?>>Long Term (7 days +)</option>
                                                                    <option value="4" <?php echo ($keyword5 == '4') ? 'selected' : ''; ?>>Weekend Only (Sat/Sun)</option>
                                                                    <option value="5" <?php echo ($keyword5 == '5') ? 'selected' : ''; ?>>Emergency Foster Only</option>
                                                                    <option value="6" <?php echo ($keyword5 == '6') ? 'selected' : ''; ?>>Overnight</option>
                                                                    <option value="7" <?php echo ($keyword5 == '7') ? 'selected' : ''; ?>>1 week</option>
                                                                    <option value="8" <?php echo ($keyword5 == '8') ? 'selected' : ''; ?>>2 weeks</option>
                                                                    <option value="9" <?php echo ($keyword5 == '9') ? 'selected' : ''; ?>>1 Month</option>
                                                                    <option value="10" <?php echo ($keyword5 == '10') ? 'selected' : ''; ?>>3 Months</option>
                                                                    <option value="11" <?php echo ($keyword5 == '11') ? 'selected' : ''; ?>>6 Months</option>
                                                                    <option value="12" <?php echo ($keyword5 == '12') ? 'selected' : ''; ?>>More than 6 Months</option>
                                                                </select>
                                                                </div>
                                                            </div>
                                                        </div>
														<?php */ ?>
														
														
														<div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label durations" for="foster-duration">Durations Able to Foster For:</label>
                                                                <div class="select-style">
                                                                <select class="form-control" id="foster-duration" name="txtsearchduration">
                                                                    <option value="">Select</option>
                                                                    <option value="1" <?php echo ($keyword5 == '1') ? 'selected' : ''; ?>>Overnight Only (<24 hours)</option>
                                                                    <option value="2" <?php echo ($keyword5 == '2') ? 'selected' : ''; ?>>Short Term (24 hours to 7 days</option>
                                                                    <option value="3" <?php echo ($keyword5 == '3') ? 'selected' : ''; ?>>Long Term (7 days +)</option>
                                                                    <option value="4" <?php echo ($keyword5 == '4') ? 'selected' : ''; ?>>Weekend Only (Sat/Sun)</option>
                                                                    <option value="5" <?php echo ($keyword5 == '5') ? 'selected' : ''; ?>>Emergency Foster Only</option>   
                                                                </select>
                                                                </div>
                                                            </div>
                                                        </div>
														
														<?php /* ?>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12 maxnumber">
                                                            <div class="form-group">
                                                                <label class="control-label" for="maxnumber">Max Number of Days Can Foster:</label>
                                                                <input type="text" class="form-control" id="maxnumber" name="txtsearchmaxnumber" value="<?php echo $keyword3; ?>" maxlength="250">
                                                            </div>
                                                        </div>
														<?php */  ?>
														
                                                        <div class="gr-wrap col-lg-8 col-md-4 col-sm-6 col-xs-12">
                                                            <div class="form-group">
                                                                <label class="control-label" for="foster-maxsize">Max Size of Animal You Can Foster (in lbs):</label>
                                                                <input type="text" class="form-control" id="foster-maxsize" name="txtsearchmaxsize" value="<?php echo $keyword6; ?>" maxlength="6">
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12 foster-animal-household">
                                                            <div class="form-group other-houshold">
                                                                <label class="control-label va-top householdcats" for="householdcats">Other Animals in Household:</label>

                                                                <ul class="clearfix">
                                                                    <li>
                                                                            <div class="custom-checkbox"><input type="checkbox" name="household_animals[]" id="householdcats" value="1"  <?php if (isset($householdanimal) && !empty($householdanimal) && in_array(1, $householdanimal)) { ?> checked <?php } ?>><label for='householdcats'>Cats</label></div>
                                                                    </li>
                                                                    <li>
                                                                        <div class="custom-checkbox"><input type="checkbox" name="household_animals[]" id="householddogs" value="2" <?php if (isset($householdanimal) && !empty($householdanimal) && in_array(2, $householdanimal)) { ?> checked <?php } ?>><label for='householddogs'>Dogs</label></div>
                                                                    </li>
																	
																	<?php /* ?>
                                                                    <li>
                                                                        <div class="custom-checkbox"><input type="checkbox" name="household_animals[]" id="householdhorse" value="3" <?php if (isset($householdanimal) && !empty($householdanimal) && in_array(3, $householdanimal)) { ?> checked <?php } ?>><label for='householdhorse'>Horse</label></div>
                                                                    </li>
																	<?php */ ?>
																	
																	<li>
                                                                        <div class="custom-checkbox"><input type="checkbox" name="household_animals[]" id="householdother" value="4" <?php if (isset($householdanimal) && !empty($householdanimal) && in_array(4, $householdanimal)) { ?> checked <?php } ?>><label for='householdother'>Other</label></div>
                                                                    </li>
																	
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="gr-wrap col-lg-12 col-md-12 col-xs-12 mart10 search_btn w100p">
                                                            <!--<a title="Search" class="btn orange orange-search">Search</a>-->
                                                            <input type="submit" value="Search" class="btn orange orange-search" id="submit" >
                                                        </div>
                                                    </form>
                                                    </div>

                                                    <div class="result_summary" id="showingresult">
														<?php echo 'Showing <b>'.$total_rows.'</b> result(s) for <b>Zip</b>: '.$zipcode.', <b>Radius</b>: '.$radius; ?>
													</div>
														<div class="view-as" id="view-as">
															<span>View As</span>
															<div class="view_type">
															    <a href="javascript:void(0);" class="grid selected"><i class="fa fa-th"></i> Grid</a>
																<?php if(count($foster_list1)>0 && !empty($foster_list1) && isset($foster_list1)) { ?>
																<a href="javascript:void(0);" class="map"><i class="fa fa-map-marker"></i> Map</a>
																<?php } ?>
															</div>
														</div>
													<table id="card-table-foster" class="table table-listing">
                                                        <thead class="head-title">
															<tr>
																<th class="w67"> </th>
																<th>Name</th>
																<th class="w280">Profile</th>
																<th>Profile Description</th>
																<th class="w60"> </th>
															</tr>
                                                        </thead>
                                                        <tbody id="grid-view">
														<?php 
															 if (!empty($foster_list1)) {
																foreach ($foster_list1 as $foster) {
																	if($foster['st_foster'] && $foster['st_foster']!=''){
																			$picture = $foster['st_profile_image'];
																			$profile_image = '';
																			if (trim($picture) != '' && file_exists($this->config->item('upload') . 'profile/63x63/' . $picture)) 
																			{
																				$finalfoster_list[$i]['st_profile_image']  = $picture;
																			} else {
																				$finalfoster_list[$i]['st_profile_image'] = 'no_photo.png';
																			}
																			$imagelink= base_url().'user-'.$foster['user_id'].'-'.$this->common_function->get_filtered_name($foster['st_display_name']); 
																			$imgsrc = $this->config->item('upload_url').'profile/63x63/'.$finalfoster_list[$i]['st_profile_image'];
																			$st_email = $foster['st_email'];
																			$st_display_name = $foster['st_display_name'];
																			$h4link = base_url() .'user-'.$foster['user_id'].'-'.$this->common_function->get_filtered_name($foster['st_display_name']); ?>
																			<tr>
																			<td><a href="<?php echo  $imagelink?>" ><img src="<?php echo $imgsrc; ?>" alt="<?php echo $st_profile_image; ?>" title="<?php echo $imgsrc; ?>" alt="<?php echo $st_profile_image; ?>" class="foster-img"/></a>
																			<td><h4><a href="<?php echo $h4link; ?>"><?php echo $st_display_name; ?></a></h4></td>
																			<?php 
																				$profile_type = '';
																				if(!empty($foster['verified'])){
																					$finalfoster_list[$i]['verified_url'] =  base_url().'assets/img/small_doobert_verified_logo.jpg' ; 
																				}else {
																					$finalfoster_list[$i]['verified_url'] =  base_url().'assets/img/gray_logo.jpg' ;	
																				}
																				$finalfoster_list[$i]['vertitle'] = ( isset($foster['verified']) && $foster['verified'] != '0000-00-00')?date('F d, Y',strtotime($foster['verified'])):'';
																				if(!empty($foster['arpa_cert']) && $foster['arpa_cert'] =='Y') { 
																						$image_cert_url = '<a data-toggle="modal" style="text-decoration: none;" href="#infoarpapopup"> <img src="'.base_url().'assets/img/arpa-certified.png" title="Certified Animal Rescue Transporter" /></a>'; 
																				} else {
																					$image_cert_url = '<img src="'.base_url().'assets/img/arpa-certified-grey.png" />'; 
																				}
					
																				$finalfoster_list[$i]['link_arpa_cert'] = $image_cert_url;
																				
																				if(isset($foster['st_foster_home']) && $foster['st_foster_home']== 'Y')
																				{
																					$profile_type .= 'Foster Home,';
																					//$finalfoster_list[$i]['st_foster_home'] = $foster['st_foster_home'];
																					//$finalfoster_list[$i]['homelink'] = base_url().'assets/img/icon-foster-home.png' ;
																				}
																				if (isset($foster['st_photographer']) && $foster['st_photographer'] == 'Y')
																				{
																					$profile_type .= 'Photographer, ';
																					//$finalfoster_list[$i]['st_photographer'] = $foster['st_photographer'];
																					//$finalfoster_list[$i]['photolink'] = base_url().'assets/img/icon-photographer.png';
																				}
																				if(isset($foster['st_pilot']) && $foster['st_pilot'] == 'Y') 
																				{
																					$profile_type .= 'Pilot Profile, ';
																					//$finalfoster_list[$i]['st_pilot'] = $foster['st_pilot'];
																					//$finalfoster_list[$i]['pilotlink'] = base_url().'assets/img/icon-pilot-profile.png';
																				}	
																				if (isset($foster['st_driver']) && $foster['st_driver'] == 'Y')
																				{
																					$profile_type .= 'Driver, ';
																					//$finalfoster_list[$i]['st_driver'] = $foster['st_driver'];
																					//$finalfoster_list[$i]['driverlink'] = base_url().'assets/img/icon-driver.png';
																				}	
																				if (isset($foster['st_in_person_volunteer']) && $foster['st_in_person_volunteer'] == 'Y') 
																				{
																					$profile_type .= 'In Person Volunteer, ';
																					//$finalfoster_list[$i]['st_in_person_volunteer'] = $foster['st_in_person_volunteer'];
																					//$finalfoster_list[$i]['personlink'] = base_url().'assets/img/icon-person.png';
																				}
					
																				if (isset($foster['st_virtual_support_volunteer']) && $foster['st_virtual_support_volunteer'] == 'Y') 
																				{
																						$profile_type .= 'Volunteer, ';
																						//$finalfoster_list[$i]['st_virtual_support_volunteer'] = $foster['st_virtual_support_volunteer'];
																						//$finalfoster_list[$i]['virtuallink'] = base_url().'assets/img/icon-virtual-support-volunteers.png';
																				}
					
																				if (isset($foster['st_lost_animal_support']) && $foster['st_lost_animal_support'] == 'Y') 
																				{
																						$profile_type .= 'Lost Animal Support, ';
																						//$finalfoster_list[$i]['st_lost_animal_support'] = $foster['st_lost_animal_support'];
																						//$finalfoster_list[$i]['lostanimallink'] = base_url().'assets/img/icon-dd-lost-aimal-support.png';
																				}
																				?>
																				<td><?php echo $profile_type; ?></td>
																				<?php 
																				$profile_description = '';
																				if (in_array("st_animal_type_ids",$foster['st_foster']) && $foster['st_animal_type_name'])
																				{
																						$st_animal_type_name =$foster['st_animal_type_name'];
																						$profile_description .='<p><span>Animal Type:</span> '.$st_animal_type_name.'</p>';
																				}
																				if(in_array("in_duration_type",$foster['st_foster']) && $foster['fosterduration']){
																						$fosterduration = $foster['fosterduration'];
																						$profile_description .= '<p><span>Durations Able to Foster For:</span> '.$fosterduration.'</p>';
																				}
																				if(in_array("st_max_foster_days",$foster['st_foster']) && $foster['st_maximum_foster_days'])
																				{
																						$st_maximum_foster_days = $foster['st_maximum_foster_days'];
																						$profile_description .= '<p><span>Max number of Days Can Foster:</span> '.$st_maximum_foster_days.'</p>';
																				}
																				if(in_array("st_max_animal_size",$foster['st_foster']) && $foster['st_maximum_foster_size'])
																				{
																						$st_maximum_foster_size = $foster['st_maximum_foster_size'];
																						$profile_description .='<p><span>Maximum Size of Animal Can Foster:</span> '.$st_maximum_foster_size.'</p>';
																				}
																				if(in_array("st_household_animal_ids",$foster['st_foster']) && $foster['st_household_other_animals']){
																						$st_household_other_animals = $foster['st_household_other_animals'];
																						$profile_description .='<p><span>Other Animals in The Household:</span> '.$st_maximum_foster_size.'</p>';
																				}
																				$i++; ?>
																				<td> <?php echo $profile_description; ?> </td>
																				<td><a href="#user-contact" data-toggle="modal" class="btn primary orange btn-action" onClick="contactUser('<?php echo $st_email."/".$st_display_name?>')"><i class="material-icons">email</i></a></td>
																				</tr>
																		<?php	}  } } else {?>
																				<tr>
																					<td colspan="5">No Record(s) Found!</td>
																				</tr>								
																			<?php } ?>
                                                      
                                                        </tbody>
                                                    </table>
                                                    
                                                    <div class="clear"></div>
                                                    <div class="dobt-pagination f1" id="dobt-pagination">
                                                        <?php  echo $pagination; ?>
                                                    </div>
                                                    
													 <div id="map-view" class="clearfix">
                                                            </div>	
                                                    <!--div class="gr-wrap col-lg-12 col-md-12 col-sm-12 foster-animal-household">
                                                        <div class="foster-search-box">
                                                            <div class="blue-heading clearfix">
                                                                <h4 id='showingresult'>Showing <?php //echo $total_rows; ?> results </h4>
                                                                <div class="view-as" id="view-as">
                                                                    <span>View As</span>
                                                                    <ul>
                                                                        <li><a href="javascript:void(0);" class="grid selected" title="Grid"><i class="fa fa-th"></i> Grid</a></li>
                                                                        <li><a href="javascript:void(0);" class="map" title="Map"><i class="fa fa-map-marker"></i> Map</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>

                                                            <div id="grid-view" class="clearfix">


                                                            </div>
                                                            <div class="dobt-pagination f1" id="dobt-pagination">
                                                                <?php // echo $pagination; ?>
                                                            </div>
                                                            <div id="map-view" class="clearfix">
                                                            </div>

                                                        </div>
                                                    </div-->
                                                    <!-- END PAGE CONTENT-->
                                                </div>
                                            </div>
                                        <!-- END CONTENT -->

                                        </div>
                                    </div>
                            </article><!-- #post-## -->
                        </div><!-- .entry-content -->

                    </div>
                </div>
            </section>
    
            <!-- END CONTAINER -->

        <!-- END CONTAINER -->
        <?php include APPPATH.'views/inc/footer-dashboard.php';?>
        <?PHP //include "includes/footer.php" ?>

            <!-- BEGIN THANK YOU MODAL POPUP-->
            <div class="modal fade" id="thankyou-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header"> 
                            <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                            <h4 class="modal-title">THANK YOU</h4>
                        </div>
                        <div class="modal-body"><h5>Your contact request was sent successfully.</h5></div>
                        <div class="modal-footer text-center no-margin"><a class="btn black" data-dismiss="modal">Close</a> </div>
                    </div>
                    <!-- /.modal-content --> 
                </div>
                <!-- /.modal-dialog --> 
            </div>

            <!-- END THANK YOU MODAL POPUP-->

            <div id="responsive">
                <div class="modal fade" id="user-contact" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                    <div class="modal-dialog">
                        <form class="horizontal-form" role="form" id="send-request" name="send_request" action="<?php echo base_url(); ?>user/foster_home_search_mail" method="post">
                            <input type="hidden" id="contact_name" name="contact_name" value="">
                            <input type="hidden" id="contact_email" name="contact_email" value="">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button aria-hidden="true" data-dismiss="modal" class="close empty_dates" type="button"></button>
                                    <h4 class="modal-title"></h4>
                                </div>							
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div class="col-md-12 no-space">
                                            <textarea id="contactmsg" name="contactmessage" rows="3" class="form-control" maxlenght="500" Placeholder="Enter Your Message" ></textarea>
                                        </div>
                                        <div class="col-md-12 btm-button no-space">
                                            <a href="javascript:void(0);" class="btn orange mart20 fr" id="send_request_btn">Send</a>
                                           <!-- <input type="submit" class="btn orange mart20 fr wht"  id="send_request_btn" value="Send">-->
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                        </form>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>			
            </div>

			 <div id="responsive">
                <div class="modal fade" id="user-contact2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                    <div class="modal-dialog">
                        <form class="horizontal-form" role="form" id="send-request" name="send_request" action="<?php echo base_url(); ?>user/foster_home_search_mail" method="post">
                            <input type="hidden" id="contact_name2" name="contact_name" value="">
                            <input type="hidden" id="contact_email2" name="contact_email" value="">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button aria-hidden="true" data-dismiss="modal" class="close empty_dates" type="button"></button>
                                    <h4 class="modal-title"></h4>
                                </div>							
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div class="col-md-12 no-space">
                                            <textarea id="contactmessage2" name="contactmessage" rows="3" class="form-control" maxlenght="500" Placeholder="Enter Your Message" ></textarea>
                                        </div>
                                        <div class="col-md-12 btm-button no-space">
                                            <a href="javascript:void(0);" class="btn orange mart20 fr" id="send_request_btn2">Send</a>
                                           <!-- <input type="submit" class="btn orange mart20 fr wht"  id="send_request_btn" value="Send">-->
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                        </form>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>			
            </div>

            <!-- END JAVASCRIPTS -->

            <script type="text/javascript">
/*$("#selectbox").click(function(){
	var select_value = $("#type-org").val();
	//alert(select_value);
	location.href = select_value;
});*/

$("#type-org").on('change',function(){
	var select_value = $("#type-org").val();
	//alert(select_value);
	//location.href = select_value;
	window.location.href = base_url+select_value;
});
			
                                                    $(document).ready(function (e) {

                                                        //$('.all_check').live('click', function () {
														$('.all_check').click(function(){	
                                                            if ($(this).find('span').hasClass('checked') == true) {
                                                                $('.single_check').find('span').addClass('checked');
                                                                $('.single_check').find('.chk_this').attr('checked', true);
                                                            } else {
                                                                $('.single_check').find('span').removeClass('checked');
                                                                $('.single_check').find('.chk_this').attr('checked', false);
                                                            }
                                                        });

                                                        //$('.single_check').live('click', function () {
														$('.single_check').click(function () {					
                                                            var count_total_check_box = $('.single_check').find('.chk_this').length;
                                                            var checked_boxes = $('.single_check').find('.chk_this:checked').length;

                                                            if (count_total_check_box == checked_boxes) {
                                                                $('.all_check').find('span').addClass('checked');
                                                                $('.all_check').find('#select_all').attr('checked', true);
                                                            } else {
                                                                $('.all_check').find('span').removeClass('checked');
                                                                $('.all_check').find('#select_all').attr('checked', false);
                                                            }
                                                            //$(this).find('span').toggleClass('checked');
                                                        });

														<?php if ($this->session->flashdata('success')) { ?>
															$('#thankyou-config').trigger('click');
														<?php } ?>
                                                        //$('#save_setting').live('click', function () {
                                                        $('#save_setting').click(function () {
                                                            var animal_type_id = $('#animaltype').val();

                                                            $('#in_animal_type_id').val(animal_type_id);

                                                            $('#breed_frm').submit();
                                                            $(this).hide();
                                                            if ($.browser.msie) {
                                                                $('.display_loader').html('<img id="loadimg" src="<?php echo base_url(); ?>assets/img/ajax-loading.gif" alt="loader" />');
                                                            }
                                                            $('.display_loader').show();
                                                            $('#loadimg').show();

                                                        });

                                                        //$(".dismiss_tooltip").live("click", function () {
															$(".dismiss_tooltip").click(function () {
                                                            //alert("d");
                                                            $.setCookie("tooltip", "Y", 90);
                                                            $(".popup-box").hide(300);
                                                        });
                                                        $.setCookie = function (cname, cvalue, exdays) {
                                                            var d = new Date();
                                                            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                                                            var expires = "expires=" + d.toGMTString();
                                                            //document.cookie = cname+"="+cvalue+"; "+expires;
                                                            document.cookie = cname + "=" + cvalue + "; " + expires + "; path=/";
                                                        };

                                                    });
                                                    $(document).ready(function (e) {
                                                        $("#manage_emails").show();
                                                    });

                                                    $(document).ready(function () {
													 document.cookie = "map_present=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
														$(document).on('click', '.map', function(){
                                                           	$("#grid-view").hide();
															$(".head-title").hide();
															$("#dobt-pagination").hide();
															$("#map-view").css("display","block")
															
 															if($( window ).width() <= 767) { 
																$('.small-only').hide(); 
															}
 
															var ismap 	 = getCookie("map_present");
															//var issearch = getCookie("search_click");
															//var ismap =document.cookie;
															//alert(ismap);
															if(ismap != 'yes')
															{
															// for loading the google map with markers.
															var fosterzipcode = $('#foster-zipcode').val();
															var fosterradius  = $('#foster-radius').val();
															var animaltype  = $('#animal-type').val();
															var maxnumber	=$('#maxnumber').val();
															var fostermaxsize = $('#foster-maxsize').val();
															var fosterduration = $('#foster-duration').val();
															var household_animals = new Array();
															var cnt=0;
															if ($('#householdcats').is(":checked"))
															{
																household_animals[cnt++]=$('#householdcats').val();
															}			
															if ($('#householddogs').is(":checked"))
															{
																household_animals[cnt++]=$('#householddogs').val();
															}
															if ($('#householdhorse').is(":checked"))
															{
																household_animals[cnt++]=$('#householdhorse').val();
															}				
															//var limit = 0;
															var limit = '<?php echo $limit ?>';
														//alert(fosterzipcode);
														  $.ajax({
														  type: "POST",
														  url: '<?php echo base_url(); ?>org_dashboard/foster_home_volunteer_search',
														  cache: false,
														  beforeSend: function(){
															  $('#loader').show();
														  },
														  data: {txtsearchzipcode:fosterzipcode,txtsearchradius:fosterradius ,txtsearchmaxnumber:maxnumber,txtsearchanimaltype: animaltype ,txtsearchduration:fosterduration,txtsearchmaxsize:fostermaxsize ,ajax:1,household_animals:household_animals,limit:limit,getmap:1},
														 // data : { },
																	
														  dataType:'json',
														  
														  complete: function(){
															$('#loader').hide();
														  },
														  success:function(data){
																//console.log(data);
																if(data.search=='no'){
																	document.cookie="map_present=yes";
																}
																var map;
																var elevator;
																var marker = null;
																var allMarkers = [];
																//var infoWindow=null;
																var lat = data.user_lat_long[0].lat;
																var lng = data.user_lat_long[0].lon;
																var bounds = new google.maps.LatLngBounds();
																var myOptions = {
																	scrollwheel: false,
																	zoom:5,
																	//center: new google.maps.LatLng(lat,lng), //41.2324, -98.4160), //43.721759 -79.350428//41.2324, -98.4160
																	center: new google.maps.LatLng(39.5, -98.35),
																	mapTypeControl: true,
																    mapTypeControlOptions: {
																	  style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
																	  position: google.maps.ControlPosition.BOTTOM_CENTER
																	},
																	zoomControl: true,
																	zoomControlOptions: {
																			position: google.maps.ControlPosition.LEFT_TOP
																	},

																	mapTypeId: google.maps.MapTypeId.ROADMAP,
																};

																var infoWindow = new google.maps.InfoWindow(), marker, j;

																var map = new google.maps.Map(document.getElementById("map-view"), myOptions);
																for (var j = 0; j < data.latlong_count; j++) {
																
																	var temp1 = JSON.parse(data.latlong[j]);
																	
																	var currentMarkerLat = parseFloat(temp1[1]);
																	var currentMarkerLon = parseFloat(temp1[2]);
																	
																	/*if(j>0){
																		var temp2 = JSON.parse(data.latlong[j-1]);
																	}*/
																	
																	if(data.name[j] !== data.name[j-1])
																	{
																	
																	if(j>0)
																	{
																		/*var existingMarkerLat = parseFloat(temp2[1]);
																		var existingMarkerLon = parseFloat(temp2[2]);

																		var cur_new_distance = distance(existingMarkerLat, existingMarkerLon, currentMarkerLat, currentMarkerLon,'K');
																		//if a marker already exists in the same position as this marker
																		if (cur_new_distance == 0 ) {
																			//alert('cur_new_distance '+cur_new_distance);
																			var currentMarkerLat = currentMarkerLat + (Math.random() -.5) / 10;// * (Math.random() * (max - min) + min);
																			var currentMarkerLon = currentMarkerLon + (Math.random() -.5) / 10;// * (Math.random() * (max - min) + min);
																			
																		}*/
																			var latlng = new google.maps.LatLng(parseFloat(currentMarkerLat), parseFloat(currentMarkerLon))
																			if (allMarkers.length != 0) 
																			{
																				for (i=0; i < allMarkers.length; i++) 
																				{
																						var existingMarker = allMarkers[i];
																						var pos = existingMarker.getPosition();
																						if (latlng.equals(pos)) 
																						{
																							var currentMarkerLat = currentMarkerLat + (Math.random() -.5) / 100;
																							var currentMarkerLon =  currentMarkerLon + (Math.random() -.5) / 100;
																							//finalLatLng = new google.maps.LatLng(newLat,newLng);
																						}
																				}
																			}
																		
																	}
										
																	var marker = new google.maps.Marker({
																		position: new google.maps.LatLng(parseFloat(currentMarkerLat), parseFloat(currentMarkerLon)),
																		//position:new google.maps.LatLng(61.2560,-149.6889),
																		map: map,
																		icon: '<?php echo base_url(); ?>assets/img/map-marker.png',
																		//title: data.name[i],
																		title:temp1[0],
																		zIndex: temp1[2]
																	});
																	allMarkers.push(marker);
																	google.maps.event.addListener(marker, 'click', (function (marker, j) {
																		return function () {
																			infoWindow.setContent(data.pop_up_desc[j]);
																			infoWindow.open(map, marker);
																			/*bounds.extend(parseFloat(temp1[1]));
																			// Automatically center the map fitting all markers on the screen
																			map.fitBounds(bounds);
																			map.panToBounds(bounds);*/
																		}
																	})(marker, j));
																	//i++;
																	bounds.extend(marker.getPosition());
																	}
																}
																
																map.fitBounds(bounds);	
																															
														  },	
														  
														error: function(jqXHR, exception) {
														if (jqXHR.status === 0) {
															alert('Not connect.\n Verify Network.');
														} else if (jqXHR.status == 404) {
															alert('Requested page not found. [404]');
														} else if (jqXHR.status == 500) {
															alert('Internal Server Error [500].');
														} else if (exception === 'parsererror') {
															alert('Requested JSON parse failed.');
																alert(jqXHR.responseText);
														} else if (exception === 'timeout') {
															alert('Time out error.');
														} else if (exception === 'abort') {
															alert('Ajax request aborted.');
														} else {
															alert('Uncaught Error.\n' + jqXHR.responseText);
														}
													}
													
														});															
														//ert('hi');
												}// for the ismap close 
                                                        });
                                                        $(document).on('click', '.grid', function(){
                                                            $("#grid-view").show();
															$(".head-title").show();
															$("#dobt-pagination").show();
                                                            $("#map-view").hide();
															if($( window ).width() <= 767) { 
																$('.small-only').show(); 
															}
                                                        });
                                                    });
	
	function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
    }
    return "";
}


function distance(lat1, lon1, lat2, lon2, unit) {
	var radlat1 = Math.PI * lat1/180
	var radlat2 = Math.PI * lat2/180
	var radlon1 = Math.PI * lon1/180
	var radlon2 = Math.PI * lon2/180
	var theta = lon1-lon2
	var radtheta = Math.PI * theta/180
	var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
	dist = Math.acos(dist)
	dist = dist * 180/Math.PI
	dist = dist * 60 * 1.1515
	if (unit=="K") { dist = dist * 1.609344 }
	if (unit=="N") { dist = dist * 0.8684 }
	return Math.floor(dist);
	//return dist
} 

                                                    $(document).ready(function () {
                                                        $("a.grid").on("click", function () {
                                                            $(this).addClass("selected");
                                                            $("a.map").removeClass("selected");
                                                        });
                                                        $("a.map").on("click", function () {
                                                            $(this).addClass("selected");
                                                            $("a.grid").removeClass("selected");
                                                        });
                                                    });
            </script>

        <script type="text/javascript" src="<?php echo base_url(); ?>assets/plugins/bootstrap-fileinput/bootstrap-fileinput.js"></script>
        <script src="<?php echo base_url(); ?>assets/plugins/jquery-validation/dist/jquery.validate.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="<?php echo base_url(); ?>assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
        <script src="<?php echo base_url(); ?>assets/scripts/custom/components-pickers.js"></script>
        <script src="<?php echo base_url(); ?>assets/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript" ></script>
        <script src="<?php echo base_url(); ?>assets/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript" ></script>
        <script src="<?php echo base_url(); ?>assets/scripts/tipso.js" type="text/javascript" charset="utf-8"></script>
            <script>
                                                    $('html').click(function () {
                                                      //  $('#subscribe-pop').hide();
                                                    })
                                                    $('#map-view').click(function (e) {
                                                        e.stopPropagation();
                                                    });

                                                    $('#link').click(function (e) {
                                                       // $('#subscribe-pop').toggle();
                                                    });
            </script> 
            <script>

                // Setup form validation on the #register-form element
                $('#my-profile').validate({
                    errorElement: 'label', //default input error message container
                    errorClass: 'help-block', // default input error message class
                    focusInvalid: false, // do not focus the last invalid input
                    rules: {
                        txtsearchzipcode: {
                            required: true
                        },
                        txtsearchradius: {
                            required: true,
                            number: true,
							chkmaxlenght:'txtsearchradius'
                        }

                    },
                    messages: {
                        txtsearchzipcode: {
                            required: "Zipcode is required."
                        },
                        txtsearchradius: {
                            required: "Radius is required.",
                            number: "Please enter numbers only."
                        }
                    },
                    invalidHandler: function (event, validator) { //display error alert on form submit   
                        $('.alert-danger', $('#my-profile')).show();
                    },
                    highlight: function (element) { // hightlight error inputs
                        $(element)
                                .closest('.form-group').addClass('has-error'); // set error class to the control group
                    },
                    success: function (label) {
                        label.closest('.form-group').removeClass('has-error');
                        label.remove();
                    },
                    errorPlacement: function (error, element) {
                        error.addClass('help-block').insertAfter(element.closest('.form-control'));
                    },
                    submitHandler: function (form) {
                        form.submit();
                    }
                });
				 $.validator.addMethod(
		     	    "chkmaxlenght",
			    	 function (value, element, addIndex) {
						if(parseInt(value) < 10000)
						return true;
						else 
						return false;	
					},
					 "Enter The Radius less than 9,999"
		 			);
            </script>
            <script>

                //$('#send_request_btn').live('click', function () {
					$(document).on('click', '#send_request_btn', function(){
               		var mess = $('#contactmsg').val();
                    if (mess == '')
                    {
                        alert('Please enter your message.');
						//$.modal.close();
                        return false;
                    }
                    else
                    {
					var name  = $('#contact_name').val();
                    var email = $('#contact_email').val();
					
						 $.ajax({
								type: "POST",
								url: '<?php echo base_url(); ?>org_dashboard/foster_home_search_mail',
								beforeSend: function(){
								$('#user-contact').modal('toggle');	
								//$.modal.close();
								$('#loader').show();
								},
								data: {contact_name:name , contact_email:email ,contactmessage:mess},
			 // data : { },
								dataType:'json',
			  					complete: function(){
								$('#loader').hide();
				    			  },
								  success:function(data){
									if(data.success == 1)
										$('.modal-title').html('<h4>Thank You</h4>')	
										$('#contactmsg').val('');
										$('#thankyou-config').modal('show');
								}, 
                        //return true;
						 });
                    }
				}); //send_request_btn2
				
				//$('#send_request_btn2').live('click', function () {
					//$('#send_request_btn2').click(function () {
					$(document).on('click', '#send_request_btn2', function(){
               		var mess = $('#contactmessage2').val();
                    if (mess == '')
                    {
                        alert('Please enter your message.');
						//$.modal.close();
                        return false;
                    }
                    else
                    {
					var name  = $('#contact_name2').val();
                    var email = $('#contact_email2').val();
					
						 $.ajax({
								type: "POST",
								url: '<?php echo base_url(); ?>org_dashboard/foster_home_search_mail',
								beforeSend: function(){
								$('#user-contact2').modal('toggle');	
								//$.modal.close();
								//$('#user-contact').hide();
								//$.modal.close();
								$('#loader').show();
								},
								data: {contact_name:name , contact_email:email ,contactmessage:mess},
			 // data : { },
								dataType:'json',
			  					complete: function(){
								$('#loader').hide();
				    			  },
								  success:function(data){
									if(data.success == 1)
										$('.modal-title').html('<h4>Thank You</h4>')	
										$('#contactmessage2').val('');
										$('#thankyou-config').modal('show');
										//$('.model-body').html('');
								}, 
                        //return true;
						 });
                    }
				});
				
				function contactUser(id) {
					//alert(id);
					var arr_val = id.split('/');
                    emailid = arr_val[0];
                    name = arr_val[1];
					
					$("#contactmsg").val('');
					$('#contact_name').val(name);
                    $('#contact_email').val(emailid);
                    $('.modal-title').html('<h4>Contact Request to ' + name + '</h4>');
					//$('#user-contact').show();
					//$('#user-contact').modal('toggle');	
					}
				function contactUser2(id) {
					//alert(id);
					var arr_val = id.split('/');
                    emailid = arr_val[0];
                    name = arr_val[1];
					
					$("#contactmessage2").val('');
					$('#contact_name2').val(name);
                    $('#contact_email2').val(emailid);
                    $('.modal-title').html('<h4>Contact Request to ' + name + '</h4>');
					//$('#user-contact2').show();
					$('#user-contact2').modal('toggle');	
					}
					
            </script>  
            <script type="text/javascript">
                var user_name = ['<?php echo (isset($name)) ? implode("','", $name) : ''; ?>'];
			   $(document).ready(function () {

                });
            </script>
            <script  type="text/javascript">
                function myFunction()
                {
                    $('#map-view').hide();
                }
            </script>	
                       	
            <script type="text/javascript">
			 $(document).ready(function () {
				//alert('hi');
				$('#card-table-foster').cardtable();
				 //autoload();
				 }); 
			function getsearchdata()
			{	
				var fosterzip     = $('#foster-zipcode').val();
				var fosterradius  = $('#foster-radius').val();
				if(fosterzip && fosterradius && parseInt(fosterradius) < 10000)
				{
					autoload2();
					return false; 
				}else {	
					var error 
						if(fosterzip=='' || fosterradius=='' )
						alert('Required fields are not provided');
						/*if(fosterradius=='')
						alert('Radius to search not provided');	*/
				}	
				
			}
			
			function autoload()
			{
				var fosterzipcode = $('#foster-zipcode').val();
				var fosterradius  = $('#foster-radius').val();
				var animaltype  = $('#animal-type').val();
				var maxnumber	=$('#maxnumber').val();
				var fostermaxsize = $('#foster-maxsize').val();
				var fosterduration = $('#foster-duration').val();
				/*var householdcats =$('#uniform-householdcats').val();
				var householddogs = $('#householddogs').val();
				var householdhorse = $('#householdhorse').val();*/
				var limit = 0;
				//alert(fosterzipcode);
			  $.ajax({
			  type: "POST",
			  url: '<?php echo base_url(); ?>org_dashboard/foster_home_volunteer_search',
			  beforeSend: function(){
				  $('#loader').show();
                  $('#submit').attr('disabled','disabled');
                $('#dobt-pagination').remove();
			  },
			  data: {txtsearchzipcode:fosterzipcode ,txtsearchradius:fosterradius ,txtsearchmaxnumber:maxnumber,txtsearchanimaltype: animaltype ,txtsearchduration:fosterduration,txtsearchmaxsize:fostermaxsize ,ajax:1 },
			 // data : { },
						
			  dataType:'json',
			  
			  complete: function(){
				$('#loader').hide();
                $('#submit').removeAttr('disabled');
			  },
			  success:function(data){
					//console.log(data);
					//console.log(data.latlong[0]);		
					/*var lat =  JSON.parse("[" + data.latlong[0] + "]");
					console.log(lat[0][1]);	
					console.log(data.name[0]);*/
					for(var i=0; i<data.counter;i++)
					{
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="foster-search-result-box"><div class="top-part">';
					var row ='<tr>';
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="foster-img"/></a></td>';
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						//row +='<ul>';
						row +='<td>';
						if(data.foster_list[i].homelink){
						//row +='<img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" />';
						row +='Foster Home';
						}
						
						if(data.foster_list[i].photolink){
						//row +='<img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" />';	
						row +='Photographer, ';	
						}

						if(data.foster_list[i].pilotlink){
						//row +='<img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" />';	
						row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" />';	
						row +='Driver, ';	
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" />';	
						 row += 'In Person Volunteer, ';	
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" />';		
						 row +='Volunteer, ';		
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support" />';		
						 row +='Lost Animal Support, ';		
						}
						row = row.replace(/,\s*$/, "");
						row +='</td>';
						//row +='</ul></div><div class="clear"></div><div class="bottom-part">';
						row +='<td>';
							if(data.foster_list[i].st_animal_type_name!=''){
							row +='<p><span>Animal Type:</span> '+data.foster_list[i].st_animal_type_name+'</p>'; 
							}
						
							if(data.foster_list[i].fosterduration != undefined){
							row +='<p><span>Durations Able to Foster For:</span> '+data.foster_list[i].fosterduration+'</p>';
							}
												
							if(data.foster_list[i].st_maximum_foster_days != undefined) {
							//console.log(data.foster_list[i].fosterduration);
							row +='<p><span>Max number of Days Can Foster:</span> '+data.foster_list[i].st_maximum_foster_days+'</p>';
							}
												
							if(data.foster_list[i].st_maximum_foster_size!= undefined){
							row +='<p><span>Maximum Size of Animal Can Foster:</span> '+data.foster_list[i].st_maximum_foster_size+'</p>';
							}
												
							if(data.foster_list[i].st_household_other_animals!= undefined){
							row +='<p><span>Other Animals in The Household:</span> '+data.foster_list[i].st_household_other_animals+'</p>';
							}
						row +='</td>';
						row +='<td><a href="#user-contact" data-toggle="modal" class="btn primary orange btn-action" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')"><i class="material-icons">email</i></a></td>';
					  //row +='</div></div></div>';
					row +='</tr>';
						
						$('#grid-view').append(row);
					}
					if(data.counter==0){
						$('#view-as').css('display','none');
					}else{
						$('#view-as').css('display','block');
					}
					$('#showingresult').empty();
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+ fosterzipcode + ', <b>Radius</b>: '+ fosterradius; 
					$('#showingresult').html(str);	
					$('#dobt-pagination').empty();
					$('#dobt-pagination').html(data.pagination);
					//equalheight('.gr-wrap .foster-search-result-box');
					$('#card-table-foster').cardtable();
                    $('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-foster');
					
			  },		
			  
			/*error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
					alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }*/
			});
				
			}
			// call when pagenation link is clicked..
	
	
	function getAjaxdata(){
		return false;
	}
	
	//$("#dobt-pagination a").live('click',function(){
	  $(document).on('click', '#dobt-pagination a', function(){
				var href = $(this).attr('href');
				if(href !=''){							
				var fosterzipcode = $('#foster-zipcode').val();
				var fosterradius  = $('#foster-radius').val();
				var animaltype  = $('#animal-type').val();
				var maxnumber	=$('#maxnumber').val();
				var fostermaxsize = $('#foster-maxsize').val();
				var fosterduration = $('#foster-duration').val();
				$.ajax({
				type: "POST",
				url: $(this).attr("href"),
				beforeSend: function(){
				  $('#loader').show();
                  $('#submit').attr('disabled','disabled');
                    $('#dobt-pagination').remove();
		       },
			    data:{txtsearchzipcode:fosterzipcode ,txtsearchradius:fosterradius ,txtsearchmaxnumber:maxnumber,txtsearchanimaltype: animaltype ,txtsearchduration:fosterduration,txtsearchmaxsize:fostermaxsize ,ajax:1},
				 complete: function(){
				$('#loader').hide();
                $('#submit').removeAttr('disabled');
			  },
			    success:function(data){
					$('#grid-view').empty();
					
					//equalheight('.gr-wrap .foster-search-result-box');
					
					var data = JSON.parse(data);
			        //alert(myString);
					//var str = myString.toString();
					for(var i=0; i<data.counter;i++)
					{
						//console.log(data.foster_list[i].photolink);
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="foster-search-result-box"><div class="top-part">';
					var row ='<tr>';	
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="foster-img"/></a></td>';
						
						//row +='<td><a href="#user-contact" data-toggle="modal" class="foster-contact" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')"><i class="fa fa-envelope-o"></i>Contact Me</a></td>'
                         
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						
						//row +='<ul>';
					row +='<td>';
						if(data.foster_list[i].homelink){
						//row +='<li><img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" /></li>';
						row +='Foster Home, ';
						}
						
						if(data.foster_list[i].photolink){
						//row +='<li><img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" /></li>';	
						row +='Photographer, ';
						}

						if(data.foster_list[i].pilotlink){
						//row +='<li><img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" /></li>';	
						row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<li><img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" /></li>';
						row +='Driver';
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<li><img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" /></li>';	
						row += 'In Person Volunteer'; 
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<li><img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" /></li>'		
						row +='Volunteer'; 
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<li><img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support" /></li>'		
						row +='Lost Animal Support';
						}
						row = row.replace(/,\s*$/, "");	 
					row+='</td>';	
						//row +='</ul></div><div class="clear"></div><div class="bottom-part">';
					row+='<td>';	
						if(data.foster_list[i].st_animal_type_name !=''){
						row +='<p><span>Animal Type:</span> '+data.foster_list[i].st_animal_type_name+'</p>'; }
						if(data.foster_list[i].fosterduration != undefined){
						row +='<p><span>Durations Able to Foster For:</span> '+data.foster_list[i].fosterduration+'</p>'; }
						if(data.foster_list[i].st_maximum_foster_days != undefined){
						row +='<p><span>Max number of Days Can Foster:</span> '+data.foster_list[i].st_maximum_foster_days+'</p>';}
						if(data.foster_list[i].st_maximum_foster_size != undefined){
						row +='<p><span>Maximum Size of Animal Can Foster:</span> '+data.foster_list[i].st_maximum_foster_size+'</p>'; }
						if(data.foster_list[i].st_household_other_animals != undefined){
						row +='<p><span>Other Animals in The Household:</span>'+data.foster_list[i].st_household_other_animals+'</p>';}
					row+='</td>';
                    row +='<td><a href="#user-contact" data-toggle="modal" class="btn primary orange btn-action" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')"><i class="material-icons">email</i></a></td>';					
						//row +='</div></div></div>';
					row+='</tr>';	
						$('#grid-view').append(row);
						//alert('upend grid');
					}
					$('#showingresult').empty();
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+ fosterzipcode + ', <b>Radius</b>: '+ fosterradius; 
					$('#showingresult').html(str);
					$('#dobt-pagination').empty();
					$('#dobt-pagination').html(data.pagination);
					//equalheight('.gr-wrap .foster-search-result-box');
					 // for scrolling top after page load. 
					$('html, body').animate({ scrollTop: 0 }, 'slow');
                    $('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-foster');
				},	
			
		/*	error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
					alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }*/
			   });
			   //return false;
		}
		});
		//return false; 
	//	});
		function autoload2()
			{
				var fosterzipcode = $('#foster-zipcode').val();
				var fosterradius  = $('#foster-radius').val();
				var animaltype  = $('#animal-type').val();
				var maxnumber	=$('#maxnumber').val();
				var fostermaxsize = $('#foster-maxsize').val();
				var fosterduration = $('#foster-duration').val();
				var household_animals = new Array();
				var cnt=0;
				if ($('#householdcats').is(":checked"))
				{
					household_animals[cnt++]=$('#householdcats').val();
				}			
				if ($('#householddogs').is(":checked"))
				{
					household_animals[cnt++]=$('#householddogs').val();
				}
				if ($('#householdhorse').is(":checked"))
				{
					household_animals[cnt++]=$('#householdhorse').val();
				}				
				var limit = 0;
				

				//alert(fosterzipcode);
			  $.ajax({
			  type: "POST",
			  url: '<?php echo base_url(); ?>org_dashboard/foster_home_volunteer_search',
			  beforeSend: function(){
				  $('#loader').show();
                  $('#submit').attr('disabled','disabled');
                    $('#dobt-pagination').remove();
			  },
			  data: {txtsearchzipcode:fosterzipcode,txtsearchradius:fosterradius ,txtsearchmaxnumber:maxnumber,txtsearchanimaltype: animaltype ,txtsearchduration:fosterduration,txtsearchmaxsize:fostermaxsize ,ajax:1,household_animals:household_animals ,search:1},
			 // data : { },
						
			  dataType:'json',
			  
			  complete: function(){
				$('#loader').hide();
                $('#submit').removeAttr('disabled');
			  },
			  success:function(data){
					
				$('#grid-view').empty();
				$('#grid-view').show();
				$('#map-view').hide();
					for(var i=0; i<data.counter;i++)
					{
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="foster-search-result-box"><div class="top-part">';
				var row ='<tr>';	
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="foster-img"/></a></td>';
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						
						//row +='<ul>';
					row +='<td>';	
						if(data.foster_list[i].homelink){
						//row +='<img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" />';
						row +='Foster Home, ';
						}
						
						if(data.foster_list[i].photolink){
						//row +='<img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" />';	
						row +='Photographer, ';	
						}

						if(data.foster_list[i].pilotlink){
						//row +='<img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" />';	
						row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" />';	
						row +='Driver, ';	
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" />';	
						 row += 'In Person Volunteer, ';	
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" />';		
						 row +='Volunteer, ';		
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support" />';		
						 row +='Lost Animal Support, ';		
						}
					row = row.replace(/,\s*$/, "");	
					row +='</td>';	
						//row +='</ul></div><div class="clear"></div><div class="bottom-part">';
					row +='<td>';		
						if(data.foster_list[i].st_animal_type_name !=''){
						row +='<p><span>Animal Type:</span> '+data.foster_list[i].st_animal_type_name+'</p>'; }
						if(data.foster_list[i].fosterduration != undefined){
							row +='<p><span>Durations Able to Foster For:</span> '+data.foster_list[i].fosterduration+'</p>'; }
						if(data.foster_list[i].st_maximum_foster_days != undefined){
						row +='<p><span>Max number of Days Can Foster:</span> '+data.foster_list[i].st_maximum_foster_days+'</p>';}
						if(data.foster_list[i].st_maximum_foster_size != undefined){
						row +='<p><span>Maximum Size of Animal Can Foster:</span> '+data.foster_list[i].st_maximum_foster_size+'</p>'; }
						if(data.foster_list[i].st_household_other_animals != undefined){
						row +='<p><span>Other Animals in The Household:</span> '+data.foster_list[i].st_household_other_animals+'</p>';}
					row +='</td>';
					row +='<td><a href="#user-contact" data-toggle="modal" class="btn primary orange btn-action" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')"><i class="material-icons">email</i></a></td>';
                    //row +='<td><a href="#user-contact" data-toggle="modal" class="foster-contact" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')"><i class="fa fa-envelope-o "></i>Contact Me</a></td>'					
						//row +='</div></div></div>';
				    row +='</tr>';	
						$('#grid-view').append(row);
					}
					if(data.counter==0){
						$('#view-as').css('display','none');
					}else{
							$('#view-as').css('display','block');
					}
					$('#showingresult').empty();
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+ fosterzipcode + ', <b>Radius</b>: '+ fosterradius; 
					$('#showingresult').html(str);
					$('#dobt-pagination').empty();
					$('#dobt-pagination').html(data.pagination);
					
					//equalheight('.gr-wrap .foster-search-result-box');
					$('#card-table-foster').cardtable();
                    $('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-foster');
					
					document.cookie = "map_present=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
			},
		});
				
		}
		</script>
			
<script>
equalheight = function(container){

var currentTallest = 0,
     currentRowStart = 0,
     rowDivs = new Array(),
     $el,
     topPosition = 0;
 $(container).each(function() {

   $el = $(this);
   $($el).height('auto')
   topPostion = $el.position().top;

   if (currentRowStart != topPostion) {
     for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
       rowDivs[currentDiv].height(currentTallest);
     }
     rowDivs.length = 0; // empty the array
     currentRowStart = topPostion;
     currentTallest = $el.height();
     rowDivs.push($el);
   } else {
     rowDivs.push($el);
     currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
  }
   for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
     rowDivs[currentDiv].height(currentTallest);
   }
 });
}

/*$(window).load(function(){
  equalheight('.gr-wrap .foster-search-result-box');
  //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});


$(window).resize(function(){
  equalheight('.gr-wrap .foster-search-result-box');
  //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});

$(window).load(function() {
  equalheight('#my-profile .gr-wrap');
  setTimeout(function(){ $(window).trigger('resize'); }, 200);
});


$(window).resize(function(){
  equalheight('#my-profile .gr-wrap');
  setTimeout(function(){ $(window).trigger('resize'); }, 200);
});*/
</script>
	 </body>
    <!-- END BODY -->
</html>