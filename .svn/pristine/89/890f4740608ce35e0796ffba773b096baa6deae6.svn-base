<?php
$base_url = $this->config->item('base_url');
//echo $this->session->userdata('orgtype');
?>
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<!-- BEGIN HEAD --><head>
    <meta charset="utf-8"/>
    <title>Search for Volunteer - In-Person Volunteer</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
	<?php include 'inc/header-css-js.php';?>
	<?PHP //include "includes/head-links.php"; ?>
	<!--<script type="text/javascript" src="//maps.googleapis.com/maps/api/js"></script>-->
	<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=<?php echo $this->config->item('googleapi_key'); ?>&sensor=false&libraries=geometry&language=en"></script>

    <!-- BEGIN PAGE LEVEL STYLES -->
    <link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/plugins/bootstrap-fileinput/bootstrap-fileinput.css"/>
    <!-- END PAGE LEVEL STYLES -->

    <!-- Multiple file upload start -->
    <!-- Generic page styles -->
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/style.css">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-ui.css">
    <!-- CSS adjustments for browsers with JavaScript disabled -->

    
<noscript>
        <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-noscript.css">
    </noscript>
    <noscript>
        <link rel="stylesheet" href="<?php echo base_url(); ?>assets/plugins/jquery-file-upload/css/jquery.fileupload-ui-noscript.css">
    </noscript>
    <!-- Multiple file upload end -->
    <style type="text/css">
        #search-results {background:none;}
    </style>
</head>
<!-- BEGIN BODY -->
<body class="page-header-fixed test-match-height test-rows test-responsive test-border-box test-margin test-padding test-border" onLoad="myFunction()">


<div id="loader" style="display: none;"><img src="<?php echo base_url(); ?>assets/img/ajax-modal-loading.gif" width="32" height="32" align="absmiddle">&nbsp;<span id="loadertext">Loading...</span></div>
<!--Menu Active Link-->
<?php $tab = 10; $subtab=10.3; $display_menu = 2; ?>
<?php
$breeds = array();
?>

<!-- BEGIN HEADER -->
<?PHP // include "includes/head-content-inside.php"; ?>
<?PHP include APPPATH."views/inc/header-myaccount.php" ?>
<?PHP //include "includes/head-content-login.php"; ?>
<!-- END HEADER -->
<div class="clearfix"></div>
<section class="breadcrumb inner-breadcrumb">
	<div class="container">
		<div class="text-left">
			<a href="<?php echo base_url(); ?>dashboard/">My Dashboard</a> <i class="fa fa-angle-right"></i> 
             <a href="<?php echo base_url(); ?>org-dashboard/">Org Dashboard</a> <i class="fa fa-angle-right"></i>Search for Volunteers
		</div>
	</div>
</section>


<section class="main-content-wrapper inner-wrapper search-for-volunteer">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <article>
                    <div class="entry-content">
                        <div class="sub-content main-container clearfix">
                            <div class="col-md-12 col-sm-12 col-xs-12 no-space">
                                <!-- Main content start -->

                                <div class="row no-margin">
                                    <h1 class="text-center no-bdr">Search for Volunteers</h1>
                                </div>

                                <div class="col-md-12 col-sm-12 col-xs-12 no-space text-center clearfix">
                                    <div class="search_box">
                                        <div class="select-style">
                                            <select id="type-org" name="">
                                                <option selected value="inperson-volunteer-search">In-Person Volunteer</option>
                                                <option value="foster-home-volunteer-search">Foster Home Volunteer</option>
                                                <option value="photographer-volunteer-search">Photographer Volunteer</option>
                                                <option value="virtual-volunteer-search">Virtual Volunteer</option>
                                                <option value="lost-animal-volunteer-search">Lost Animal Volunteer</option>
                                            </select>
                                        </div>
                                        <!--<a href="javascript:void(0);" id="selectbox" class="btn orange-small">Search</a>-->
                                    </div>
                                </div>


                                <!-- BEGIN CONTENT -->
                                <div class="main-content-wrapper inner-wrapper clearfix">
                                    <div class="page-content">
                                        <div class="row content-wrapper">

                                                <!-- BEING PAGE CONTENT-->
					                            <?php if(isset($success_msg)){ ?>
                                                    <div class="col-lg-12 no-space">
                                                        <div class="margin-bottom-15 info-streep"><?php echo $success_msg;?></div>
                                                    </div>
					                            <?php } ?>
                                                <div class="row dobt-form no-margin foster-search common_searchbox">

                                                    <div class="search_term clearfix">
                                                        <form action="<?php echo base_url().'inperson-volunteer-search'; ?>" method="post" name="foster-photographer-search-form" id="my-profile">
                                                        <div class="gr-wrap col-lg-2 col-md-2 col-sm-6 col-xs-12">
                                                            <div class="form-group marb-zip">
                                                                <label class="control-label" for="InPerson-zipcode">My Zipcode:</label>
                                                                <input type="text" class="form-control" id="InPerson-zipcode" name="inpersonzipcode" value="<?php echo ($this->session->userdata('searchadmin1'))?$this->session->userdata('searchadmin1'):($this->session->userdata('zip')); ?>" maxlength="250">
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-2 col-md-2 col-sm-6 col-xs-12">
                                                            <div class="form-group marb-radius">
                                                                <label class="control-label" for="InPerson-radius">Radius to Search:</label>
                                                                <input type="text" class="form-control" id="InPerson-radius" name="inpersonradius" value="<?php echo ($this->session->userdata('searchadmin2'))?$this->session->userdata('searchadmin2'):"50"; ?>" maxlength="250">
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12 inperson_checkbox">
                                                            <div class="form-group marb10">
                                                                <div class="custom-checkbox">
                                                                <input type="checkbox" name="inpersoninspector" id="inperson-adoption-inspector" value="1" <?php echo ($this->session->userdata('searchadmin3') && $this->session->userdata('searchadmin3')==1)?'checked':''; ?>><label for="inperson-adoption-inspector"><span class="label-text">Adoption/Foster home visit inspector <br><span class="label-sub-text">(visiting the home of an applicant)</span></span></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-4 col-md-4 col-sm-6 col-xs-12 inperson_checkbox">
                                                            <div class="form-group marb10 mh87">
                                                                <div class="custom-checkbox">
                                                                <input type="checkbox" name="inpersonreviewer" id="inperson-adoption-reviewer" value="1" <?php echo ($this->session->userdata('searchadmin4') && $this->session->userdata('searchadmin4')==1)?'checked':''; ?>><label for="inperson-adoption-reviewer"><span class="label-text">Adoption application reviewer <br><span class="label-sub-text">(reviewing applications at a booth or facility)</span></span></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-5 col-md-5 col-sm-6 col-xs-12 inperson_checkbox">
                                                            <div class="form-group">
                                                                <div class="custom-checkbox">
                                                                <input type="checkbox" name="inpersonfundraiser" id="inperson-physical-fundraiser" value="1" <?php echo ($this->session->userdata('searchadmin5') && $this->session->userdata('searchadmin5')==1)?'checked':''; ?>><label for="inperson-physical-fundraiser"><span class="label-text">Physical fundraiser <br><span class="label-sub-text">(i.e. booth at an event or actual fundraising event)</span></span></label>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-5 col-md-5 col-sm-6 col-xs-12 inperson_checkbox inperson-animal-facility">
                                                            <div class="form-group">
                                                                <div class="custom-checkbox">
                                                                <input type="checkbox" name="inpersonanimalcare" id="inperson-animal-care" value="1" <?php echo ($this->session->userdata('searchadmin6') && $this->session->userdata('searchadmin6')==1)?'checked':''; ?>><label for='inperson-animal-care'><span class="label-text">Animal care at a facility <br><span class="label-sub-text">(walking or socializing animals, cleaning cages)</span></span></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="gr-wrap col-lg-12 col-md-12 col-xs-12 search_btn w100p">
                                                            <!--<a title="Search" class="btn orange orange-search" onclick="return getsearchdata()">Search</a>-->
                                                            <input type="submit" value="Search" class="btn orange orange-search" id="submit" >
                                                        </div>
                                                    </form>
                                                    </div>

                                                    <div class="result_summary" id="showingresult"><?php echo 'Showing <b>'.$total_rows.'</b> result(s) for <b>Zip</b>: '.$zipcode.', <b>Radius</b>: '.$radius; ?></div>
                                                    	<div class="view-as" id="view-as">
															<span>View As</span>
															<div class="view_type">
															    <a href="javascript:void(0);" class="grid selected"><i class="fa fa-th"></i> Grid</a>
																<?php if(count($inpersonal_list1)>0 && !empty($inpersonal_list1) && isset($inpersonal_list1)) { ?>
																<a href="javascript:void(0);" class="map"><i class="fa fa-map-marker"></i> Map</a>
																<?php } ?>
															</div>
														</div>
														<table id="card-table-inperson" class="table table-listing">
                                                        <thead class="head-title">
                                                        <tr>
                                                            <th class="w67"> </th>
                                                            <th>Name</th>
                                                            <th class="w280">Profile</th>
                                                            <th class="w474">Profile Description</th>
                                                            <th class="w60"> </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody id="grid-view">
														 <?php 	 if (!empty($inpersonal_list1)){
																		foreach ($inpersonal_list1 as $foster){
																		if($foster['inpersonal']!=''){
																				$picture = $foster['st_profile_image'];
																				$profile_image = '';
																				if (trim($picture) != '' && file_exists($this->config->item('upload') . 'profile/63x63/' . $picture)) {
																						$st_profile_image  = $picture;
																				} else {
																					$st_profile_image = 'no_photo.png';
																				}
																				$imagelink= base_url().'user-'.$foster['user_id'].'-'.$this->common_function->get_filtered_name($foster['st_display_name']); 
																				$imgsrc = $this->config->item('upload_url').'profile/63x63/'.$st_profile_image;
																				$st_email = $foster['st_email'];
																				$st_display_name = $foster['st_display_name'];
																				$h4link = base_url() .'user-'.$foster['user_id'].'-'.$this->common_function->get_filtered_name($foster['st_display_name']);
																				if($foster['verified'])
																				{
																						$verified_url =  base_url().'assets/img/small_doobert_verified_logo.jpg' ; 
																				}else {
																						$verified_url =  base_url().'assets/img/gray_logo.jpg' ;	
																				}
																				$vertitle = ( isset($foster['verified']) && $foster['verified'] != '0000-00-00')?date('F d, Y',strtotime($foster['verified'])):'';
																				if(!empty($foster['arpa_cert']) && $foster['arpa_cert'] =='Y') 
																				{ 
																					$image_cert_url = '<a data-toggle="modal" style="text-decoration: none;" href="#infoarpapopup"> <img src="'.base_url().'assets/img/arpa-certified.png" title="Certified Animal Rescue Transporter" /></a>'; 
																				} else {
																					$image_cert_url = '<img src="'.base_url().'assets/img/arpa-certified-grey.png" />'; 
																				}
																				$link_arpa_cert = $image_cert_url;
																				$homelink='';
																				$profile_type = '';
																				if(isset($foster['st_foster_home']) && $foster['st_foster_home']== 'Y')
																				{
																					$profile_type .= 'Foster Home,';
																					//$finalfoster_list[$i]['st_foster_home'] = $foster['st_foster_home'];
																					//$finalfoster_list[$i]['homelink'] = base_url().'assets/img/icon-foster-home.png' ;
																				}
																				//$finalfoster_list[$i]['photolink']='';
																				if (isset($foster['st_photographer']) && $foster['st_photographer'] == 'Y')
																				{
																					$profile_type .= 'Photographer, ';
																					//$finalfoster_list[$i]['st_photographer'] = $foster['st_photographer'];
																					//$finalfoster_list[$i]['photolink'] = base_url().'assets/img/icon-photographer.png';
																				}
																				//$finalfoster_list[$i]['pilotlink']='';
																				if(isset($foster['st_pilot']) && $foster['st_pilot'] == 'Y') 
																				{
																					$profile_type .= 'Pilot Profile, ';
																					//$finalfoster_list[$i]['st_pilot'] = $foster['st_pilot'];
																					//$finalfoster_list[$i]['pilotlink'] = base_url().'assets/img/icon-pilot-profile.png';
																				}	
																				//$finalfoster_list[$i]['driverlink']='';
																				if (isset($foster['st_driver']) && $foster['st_driver'] == 'Y')
																				{
																					$profile_type .= 'Driver, ';
																					//$finalfoster_list[$i]['st_driver'] = $foster['st_driver'];
																					//$finalfoster_list[$i]['driverlink'] = base_url().'assets/img/icon-driver.png';
																				}
																				//$finalfoster_list[$i]['personlink']='';
																				if (isset($foster['st_in_person_volunteer']) && $foster['st_in_person_volunteer'] == 'Y') 
																				{
																					$profile_type .= 'In Person Volunteer, ';
																					//$finalfoster_list[$i]['st_in_person_volunteer'] = $foster['st_in_person_volunteer'];
																					//$finalfoster_list[$i]['personlink'] = base_url().'assets/img/icon-person.png';
																				}
																				//$finalfoster_list[$i]['virtuallink']='';
																				if (isset($foster['st_virtual_support_volunteer']) && $foster['st_virtual_support_volunteer'] == 'Y') 
																				{
																					$profile_type .= 'Volunteer, ';
																					//$finalfoster_list[$i]['st_virtual_support_volunteer'] = $foster['st_virtual_support_volunteer'];
																					//$finalfoster_list[$i]['virtuallink'] = base_url().'assets/img/icon-virtual-support-volunteers.png';
																				}
																				//$finalfoster_list[$i]['lostanimallink']='';
																				if (isset($foster['st_lost_animal_support']) && $foster['st_lost_animal_support'] == 'Y') 
																				{
																					$profile_type .= 'Lost Animal Support, ';
																					//$finalfoster_list[$i]['st_lost_animal_support'] = $foster['st_lost_animal_support'];
																					//$finalfoster_list[$i]['lostanimallink'] = base_url().'assets/img/icon-dd-lost-aimal-support.png';
																				}
																				$profile_description = '';
																				if(in_array('st_volunteer_zipcode',$foster['inpersonal']))
																				{
																					//$finalfoster_list[$i]['st_volunteer_zipcode'] =$foster['st_volunteer_zipcode'];
																					
																				}
																				if(in_array('in_home_visit',$foster['inpersonal']) && $foster['in_home_visit']=='1')
																				{
																					//$finalfoster_list[$i]['in_home_visit'] = $foster['in_home_visit'];
																					$profile_description .='<p><span>Adoption/Foster home visit inspector</span> (visiting the home of an applicant)</p>';
																				}
																				if(in_array('in_app_reviewer',$foster['inpersonal']) && $foster['in_app_reviewer']=='1')
																				{
																					//$finalfoster_list[$i]['in_app_reviewer'] = $foster['in_app_reviewer'];
																					$profile_description .='<p><span>Adoption application reviewer</span> (reviewing applications at a booth or facility)</p>';
																				}
																				if(in_array('in_physical_fundraiser',$foster['inpersonal']) && $foster['in_physical_fundraiser']=='1')
																				{
																					//$finalfoster_list[$i]['in_physical_fundraiser'] = $foster['in_physical_fundraiser'];
																					$profile_description .= '<p><span>Physical fundraiser</span> (i.e. booth at an event or actual fundraising event)</p>';
																				}
																				if(in_array('in_animal_care',$foster['inpersonal']) && $foster['in_animal_care']=='1')
																				{
																					//$finalfoster_list[$i]['in_animal_care'] = $foster['in_animal_care'];
																					$profile_description .= '<p><span>Animal care at a facility</span> (walking or socializing animals, cleaning cages)</p>';
																				}
																				//$i++; ?>
																				<tr>
																		<td><a href="<?php echo $imagelink; ?>"><img src="<?php echo $imgsrc; ?>" alt="<?php echo $st_profile_image; ?>" title="<?php echo $imgsrc; ?>" alt="<?php echo $st_profile_image; ?>" class="img_radius"/></a></td>
																		<td><h4><a href="<?php echo $h4link; ?>"><?php echo $st_display_name; ?></a></h4></td>
																		<td><?php echo $profile_type; ?></td>
																		<td> <?php echo $profile_description; ?> </td>
																		<td class="center"><a href="#user-contact" onClick="contactUser('<?php echo $st_email."/".$st_display_name?>')" class="btn primary orange btn-action"  data-toggle="modal"><i class="material-icons">email</i></a></td>
																		</tr>
																				<?php } //!empty
																				} // for each
																			} else { ?>
																				<tr>
																				<td colspan="5">No Record(s) Found!</td>
																				</tr>								
																			<?php } ?>									
                                                        </tbody>
                                                    </table>
													<div class="clear"></div>
                                                    <div class="dobt-pagination f1" id="dobt-pagination">
                                                        <?php echo $pagination; ?>
                                                    </div>
                                                    
                                                    <div id="map-view" class="clearfix">
                                                    </div>
                                                 
                                                </div>

                                                <!-- END PAGE CONTENT-->


                                        </div>
                                    </div>
                                </div>
                                <!-- END CONTENT -->

                            </div>
                        </div>
                </article><!-- #post-## -->
            </div><!-- .entry-content -->

        </div>
    </div>
</section>


<!-- END CONTAINER --> 
<?php include APPPATH.'views/inc/footer-dashboard.php';?>
<?PHP //include "includes/footer.php" ?>

<!-- BEGIN THANK YOU MODAL POPUP-->
<div class="modal fade" id="thankyou-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> 
        <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
        <h4 class="modal-title">THANK YOU</h4>
      </div>
      <div class="modal-body"><h5>Your contact request was sent successfully.</h5></div>
      <div class="modal-footer text-center no-margin"><a class="btn black" data-dismiss="modal">Close</a> </div>
    </div>
    <!-- /.modal-content --> 
  </div>
  <!-- /.modal-dialog --> 
</div>
<!-- END THANK YOU MODAL POPUP-->
<div id="responsive">
	<div class="modal fade" id="user-contact" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
	  <div class="modal-dialog">
		<form class="horizontal-form" role="form" id="send_request" name="send_request" enctype="multipart/form-data" action="" method="post">
		<input type="hidden" id="contact_name" name="contact_name" value="">
		<input type="hidden" id="contact_email" name="contact_email" value="">
		  <div class="modal-content">
			<div class="modal-header">
			  <button aria-hidden="true" data-dismiss="modal" class="close empty_dates" type="button"></button>
			  <h4 class="modal-title">Contact Request to John</h4>
			</div>
			<div class="modal-body">
			  <div class="form-group">
			  <div class="col-md-12 no-space">
				 <textarea id="contactmsg" name="contactmessage" rows="3" class="form-control" maxlenght="500" Placeholder="Enter Your Message" ></textarea>
				 </div>
				 <div class="col-md-12 btm-button no-space">
				 <a href="javascript:void(0);" class="btn orange mart20 fr" id="send_request_btn">Send</a>
				 </div>
				</div>
			  <div class="clearfix"></div>
			</div>
		  </div>
		</form>
		<!-- /.modal-content --> 
	  </div>
	  <!-- /.modal-dialog --> 
	</div>
</div>

<div id="responsive">
                <div class="modal fade" id="user-contact2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                    <div class="modal-dialog">
                        <form class="horizontal-form" role="form" id="send-request" name="send_request" action="<?php echo base_url(); ?>user/foster_home_search_mail" method="post">
                            <input type="hidden" id="contact_name2" name="contact_name" value="">
                            <input type="hidden" id="contact_email2" name="contact_email" value="">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button aria-hidden="true" data-dismiss="modal" class="close empty_dates" type="button"></button>
                                    <h4 class="modal-title"></h4>
                                </div>                          
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div class="col-md-12 no-space">
                                            <textarea id="contactmessage2" name="contactmessage" rows="3" class="form-control" maxlenght="500" Placeholder="Enter Your Message" ></textarea>
                                        </div>
                                        <div class="col-md-12 btm-button no-space">
                                            <a href="javascript:void(0);" class="btn orange mart20 fr" id="send_request_btn2">Send</a>
                                           <!-- <input type="submit" class="btn orange mart20 fr wht"  id="send_request_btn" value="Send">-->
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                            </div>
                        </form>
                        <!-- /.modal-content --> 
                    </div>
                    <!-- /.modal-dialog --> 
                </div>          
            </div>
<!-- END JAVASCRIPTS -->


<script type="text/javascript">

/*$("#selectbox").click(function(){
	var select_value = $("#type-org").val();
	//alert(select_value);
	//location.href = select_value;
	window.location.href = base_url+select_value;
}); */

$("#type-org").on('change',function(){
	var select_value = $("#type-org").val();
	//alert(select_value);
	//location.href = select_value;
	window.location.href = base_url+select_value;
});
						
    $(document).ready(function(e) {
        //$('#animaltype').live('change',function(){
        $('#animaltype').change(function(){
            $('#notification_frm').submit();
            $('#save_setting').hide();
            //$('#loader').show();
            $('#loadimg').show();
        });

        //$('.all_check').live('click',function() {
        $('.all_check').click(function() {
            if($(this).find('span').hasClass('checked') == true) {
                $('.single_check').find('span').addClass('checked');
                $('.single_check').find('.chk_this').attr('checked',true);
            } else {
                $('.single_check').find('span').removeClass('checked');
                $('.single_check').find('.chk_this').attr('checked',false);
            }
        });

        //$('.single_check').live('click',function() {
        $('.single_check').click(function() {
            var count_total_check_box = $('.single_check').find('.chk_this').length;
            var checked_boxes = $('.single_check').find('.chk_this:checked').length;

            if(count_total_check_box == checked_boxes) {
                $('.all_check').find('span').addClass('checked');
                $('.all_check').find('#select_all').attr('checked',true);
            } else {
                $('.all_check').find('span').removeClass('checked');
                $('.all_check').find('#select_all').attr('checked',false);
            }
            //$(this).find('span').toggleClass('checked');
        });

		<?php if($this->session->flashdata('success')) { ?>
        $('#thankyou_popup').trigger('click');
		<?php } ?>

        //$('#save_setting').live('click',function(){
        $('#save_setting').click(function(){
            var animal_type_id = $('#animaltype').val();

            $('#in_animal_type_id').val(animal_type_id);

            $('#breed_frm').submit();
            $(this).hide();
            if($.browser.msie) {
                $('.display_loader').html('<img id="loadimg" src="<?php echo base_url(); ?>assets/img/ajax-loading.gif" alt="loader" />');
            }
            $('.display_loader').show();
            $('#loadimg').show();

        });

        //$(".dismiss_tooltip").live("click",function(){
        $(".dismiss_tooltip").click(function(){
            //alert("d");
            $.setCookie("tooltip","Y",90);
            $(".popup-box").hide(300);
        });
        $.setCookie = function(cname,cvalue,exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays*24*60*60*1000));
            var expires = "expires=" + d.toGMTString();
            //document.cookie = cname+"="+cvalue+"; "+expires;
            document.cookie = cname+"="+cvalue+"; "+expires+"; path=/";
        };

    });
    $(document).ready(function(e) {
        $("#manage_emails").show();
    });

 $(document).ready(function () {
         document.cookie = "map_present=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
            $(document).on('click', '.map', function(){
                $("#grid-view").hide();
                $(".head-title").hide();
                $("#dobt-pagination").hide();
                $("#map-view").css("display","block")
                
                if($( window ).width() <= 767) { 
                    $('.small-only').hide(); 
                }

                var ismap    = getCookie("map_present");
                //var issearch = getCookie("search_click");
                //var ismap =document.cookie;
                //alert(ismap);
                // alert(ismap);
                // if(ismap != 'yes')
                {
                // for loading the google map with markers.
                var fosterzip     = $('#InPerson-zipcode').val();
                var radius        = $('#InPerson-radius').val();
                var homechk;
                var reviewerchk;
                var physicalchk;
                var carechk;
                var cnt=0;
                if ($('#inperson-adoption-inspector').is(":checked"))
                {
                    homechk =$('#availableSun').val();
                }           
                if ($('#inperson-adoption-reviewer').is(":checked"))
                {
                    reviewerchk =$('#availableMon').val();
                }
                if ($('#inperson-physical-fundraiser').is(":checked"))
                {
                    physicalchk =$('#inperson-physical-fundraiser').val();
                }
                if ($('#inperson-animal-care').is(":checked"))
                {
                    carechk = $('#inperson-animal-care').val();
                }       
                //var limit = 0;
				var limit = '<?php echo $limit ?>';
            //alert(fosterzipcode);
              $.ajax({
              type: "POST",
              //url: '<?php echo base_url(); ?>org_dashboard/inperson_volunteer_search',
			  url: '<?php echo base_url(); ?>org_dashboard/get_inperson_volunteer_search',
              cache: false,
              beforeSend: function(){
                  $('#loader').show();
              },
             //data: {inpersonzipcode:fosterzip, inpersonradius:radius, inpersoninspector:homechk ,inpersonreviewer:reviewerchk ,inpersonfundraiser:physicalchk, inpersonanimalcare:carechk,limit:limit,ajax:1,getmap:1},
			 data: {limit:limit,ajax:1,getmap:1},
             // data : { },
                        
              dataType:'json',
              
              complete: function(){
                $('#loader').hide();
              },
              success:function(data){
                    console.log(data);
                    if(data.search=='no'){
                        document.cookie="map_present=yes";
                    }
                    var map;
                    var elevator;
                    var marker = null;
                    var allMarkers = [];
                    //var infoWindow=null;
                    var lat = data.user_lat_long[0].lat;
                    var lng = data.user_lat_long[0].lon;
                    var bounds = new google.maps.LatLngBounds();
                    //var latlng = new google.maps.LatLng(39.305, -76.617);
                    var myOptions = {
                     
                        scrollwheel: false,
                        zoom:5,
                        //center: new google.maps.LatLng(lat,lng), //41.2324, -98.4160), //43.721759 -79.350428//41.2324, -98.4160
                        center: new google.maps.LatLng(39.5, -98.35),
                       //center: latlng,
                        mapTypeControl: true,
                        mapTypeControlOptions: {
                          style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
                          position: google.maps.ControlPosition.BOTTOM_CENTER
                        },
                        zoomControl: true,
                        zoomControlOptions: {
                                position: google.maps.ControlPosition.LEFT_TOP
                        },

                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                    };

                    var infoWindow = new google.maps.InfoWindow(), marker, j;

                    var map = new google.maps.Map(document.getElementById("map-view"), myOptions);
                    for (var j = 0; j < data.latlong_count; j++) {
                    
                        var temp1 = JSON.parse(data.latlong[j]);
                        
                        var currentMarkerLat = parseFloat(temp1[1]);
                        var currentMarkerLon = parseFloat(temp1[2]);
                        
                        /*if(j>0){
                            var temp2 = JSON.parse(data.latlong[j-1]);
                        }*/
                        
                        if(data.name[j] !== data.name[j-1])
                        {
                        
                        if(j>0)
                        {
                            /*var existingMarkerLat = parseFloat(temp2[1]);
                            var existingMarkerLon = parseFloat(temp2[2]);

                            var cur_new_distance = distance(existingMarkerLat, existingMarkerLon, currentMarkerLat, currentMarkerLon,'K');
                            //if a marker already exists in the same position as this marker
                            if (cur_new_distance == 0 ) {
                                //alert('cur_new_distance '+cur_new_distance);
                                var currentMarkerLat = currentMarkerLat + (Math.random() -.5) / 10;// * (Math.random() * (max - min) + min);
                                var currentMarkerLon = currentMarkerLon + (Math.random() -.5) / 10;// * (Math.random() * (max - min) + min);
                                
                            }*/
                                var latlng = new google.maps.LatLng(parseFloat(currentMarkerLat), parseFloat(currentMarkerLon))
                                if (allMarkers.length != 0) 
                                {
                                    for (i=0; i < allMarkers.length; i++) 
                                    {
                                            var existingMarker = allMarkers[i];
                                            var pos = existingMarker.getPosition();
                                            if (latlng.equals(pos)) 
                                            {
                                                var currentMarkerLat = currentMarkerLat + (Math.random() -.5) / 100;
                                                var currentMarkerLon =  currentMarkerLon + (Math.random() -.5) / 100;
                                                //finalLatLng = new google.maps.LatLng(newLat,newLng);
                                            }
                                    }
                                }
                            
                        }

                        var marker = new google.maps.Marker({
                            position: new google.maps.LatLng(parseFloat(currentMarkerLat), parseFloat(currentMarkerLon)),
                            //position:new google.maps.LatLng(61.2560,-149.6889),
                            map: map,
                            icon: '<?php echo base_url(); ?>assets/img/map-marker.png',
                            //title: data.name[i],
                            title:temp1[0],
                            zIndex: temp1[2]
                        });
                        allMarkers.push(marker);
                        google.maps.event.addListener(marker, 'click', (function (marker, j) {
                            return function () {
                                infoWindow.setContent(data.pop_up_desc[j]);
                                infoWindow.open(map, marker);
                                /*bounds.extend(parseFloat(temp1[1]));
                                // Automatically center the map fitting all markers on the screen
                                map.fitBounds(bounds);
                                map.panToBounds(bounds);*/
                            }
                        })(marker, j));
                        //i++;
                        bounds.extend(marker.getPosition());
                        }
                    }
                    
                    map.fitBounds(bounds);  
                                                                                
              },    
              
            error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
                    alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
        
            });                                                         
            //ert('hi');
    }// for the ismap close 
            });
            $(document).on('click', '.grid', function(){
                $("#grid-view").show();
                $(".head-title").show();
                $("#dobt-pagination").show();
                $("#map-view").hide();
                if($( window ).width() <= 767) { 
                    $('.small-only').show(); 
                }
            });
        });
 function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1);
            if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
        }
        return "";
    }

    $(document).ready(function() {
        $("a.grid").on("click", function() {
            $(this).addClass("selected");
            $("a.map").removeClass("selected");
        });
        $("a.map").on("click", function() {
            $(this).addClass("selected");
            $("a.grid").removeClass("selected");         
			$(".head-title").hide();
        });
    });

    </script>
    <script type="text/javascript" src="<?php echo base_url(); ?>assets/plugins/bootstrap-fileinput/bootstrap-fileinput.js"></script>
<script src="<?php echo base_url(); ?>assets/plugins/jquery-validation/dist/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="<?php echo base_url(); ?>assets/scripts/custom/components-pickers.js"></script>
<script src="<?php echo base_url(); ?>assets/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript" ></script>
<script src="<?php echo base_url(); ?>assets/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript" ></script>
<script type="text/javascript">
    $('html').click(function() {
        //$('#subscribe-pop').hide();
     })

     $('#map-view').click(function(e){
         e.stopPropagation();
     });

    $('#link').click(function(e) {
        //$('#subscribe-pop').toggle();
     });


    $(document).ready(function(){
        $(".map").click(function(){
            $("#grid-view").hide();
            $("#map-view").show();
        });
        $(".grid").click(function(){
            $("#grid-view").show();
            $("#map-view").hide();
        });
    });
</script>
<script src="<?php echo base_url(); ?>assets/scripts/tipso.js" type="text/javascript" charset="utf-8"></script>
<script>
$(document).ready(function(){
	
	jQuery('.title-tipso').tipso();
	
	/*$("area[rel^='prettyPhoto']").prettyPhoto();
	$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'normal',theme:'light_square',slideshow:3000, autoplay_slideshow: false});
	$(".gallery:gt(0) a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'fast',slideshow:10000, hideflash: true});
	
	$('#'+file_divid).fileupload({
		  url: upload_link,
		  //maxNumberOfFiles: 5,
		  maxFileSize : 5242880,
		  acceptFileTypes :/(\.|\/)(jpg|jpeg|png|gif)$/i,
		  sequentialUploads: true,
		  autoUpload :true
		});*/
});

//$('#submit_photos').live('click',function(){
  $('#submit_photos').click(function(){	 
	var file_name = '';
	$('#transport_photo').val('');
	$('.table-striped tr').each(function() {
    var transport_photos = $(this).find('td p a').text(); 
	if(transport_photos!='')
	{  
		if (file_name == '') {
				file_name += transport_photos;
		}else{
				file_name += ',' + transport_photos; 
		}
	}
	});
	$('#transport_photo').val(file_name);
	if(file_name == "") {
		alert("Please attach photos.")
		return false;
	} else {
		$('#submit_photos').hide();
		document.transport_photos.submit();
		$('#loadimg_upload').show();
		return true;
	}
});
	
$('html').click(function() {
    $('#subscribe-pop').hide();
 })

 $('#map-view').click(function(e){
     e.stopPropagation();
 });

$('#link').click(function(e) {
 $('#subscribe-pop').toggle();
 });
			 // Setup form validation on the #register-form element
   $('#my-profile').validate({
					//alert('in validate');
                    errorElement: 'label', //default input error message container
                    errorClass: 'help-block', // default input error message class
                    focusInvalid: false, // do not focus the last invalid input
                    rules: {
                        inpersonzipcode: {
                            required: true
                        },
                        inpersonradius: {
                            required: true,
                            number: true,
							chkmaxlenght:'inpersonradius'
                        }
                    },
                    messages: {
                        inpersonzipcode: {
                            required: "Zipcode is required."
                        },
                         inpersonradius: {
                            required: "Radius is required.",
                            number: "Please enter numbers only."
                        }
                    },
                    invalidHandler: function (event, validator) { //display error alert on form submit   
                        $('.alert-danger', $('#my-profile')).show();
                    },
                    highlight: function (element) { // hightlight error inputs
                        $(element)
                                .closest('.form-group').addClass('has-error'); // set error class to the control group
                    },
                    success: function (label) {
                        label.closest('.form-group').removeClass('has-error');
                        label.remove();
                    },
                    errorPlacement: function (error, element) {
                        error.addClass('help-block').insertAfter(element.closest('.form-control'));
                    },
                    submitHandler: function (form) {
                        form.submit();
                    }
                });
				 $.validator.addMethod(
		     	    "chkmaxlenght",
			    	 function (value, element, addIndex) {
						if(parseInt(value) < 10000)
						return true;
						else 
						return false;	
					},
					 "Enter The Radius less than 9,999"
		 			);
               //$('#send_request_btn').live('click', function () {
			   $(document).on('click', '#send_request_btn', function(){				   
                    var mess = $('#contactmsg').val();					
                    if (mess == '')
                    {
                        alert('Please enter your message.');
                        return false;
                    }
                    else
                    {
                      var name  = $('#contact_name').val();
						var email = $('#contact_email').val();
					
						 $.ajax({
								type: "POST",
								url: '<?php echo base_url(); ?>org_dashboard/foster_home_search_mail',
								beforeSend: function(){
								$('#user-contact').modal('toggle');	
								//$.modal.close();
								$('#loader').show();
								},
								data: {contact_name:name , contact_email:email ,contactmessage:mess},
			 // data : { },
								dataType:'json',
			  					complete: function(){
								$('#loader').hide();
				    			  },
								  success:function(data){
									if(data.success == 1)
										$('.modal-title').html('<h4>Thank You</h4>')	
										$('#contactmsg').val('');
										$('#thankyou-config').modal('show');	
								}, 
                        //return true;
						 });
                    }
                });
                function contactUser(id) {
					var arr_val = id.split('/');
                    emailid = arr_val[0];
                    name = arr_val[1];
					
					$("#contactmsg").val('');
					$('#contact_name').val(name);
                    $('#contact_email').val(emailid);
                    $('.modal-title').html('<h4>Contact Request to ' + name + '</h4>');
					}

                function contactUser2(id) {
                    
                    var arr_val = id.split('/');
                    emailid = arr_val[0];
                    name = arr_val[1];
                    
                    $("#contactmessage2").val('');
                    $('#contact_name2').val(name);
                    $('#contact_email2').val(emailid);
                    $('.modal-title').html('<h4>Contact Request to ' + name + '</h4>');
                    //$('#user-contact2').show();
                    $('#user-contact2').modal('toggle');    
                    }

           
					 $(document).ready(function (){
								//autoload();
								$('#card-table-inperson').cardtable();
								//$('#dobt-pagination').html('');
					});
					function myFunction()
                    {
                        $('#map-view').hide();
                    }
					 function getsearchdata()
					 {
						var fosterzip     = $('#InPerson-zipcode').val();
						var fosterradius  = $('#InPerson-radius').val();
								
							if(fosterzip && fosterradius && parseInt(fosterradius) < 10000)
									{
										autoload2();
										return false; 
									}else {	
											var error 
											if(fosterzip=='' || fosterradius==''){
											//alert('Required fields are not provided');
											}
											/*if(fosterradius=='')
											alert('Radius to search not provided');	*/
									}	
						 
					 }
 function autoload()
			{
				//alert('in the autoUpload');
				var fosterzip     = $('#InPerson-zipcode').val();
				var radius        = $('#InPerson-radius').val();
				var homechk;
				var reviewerchk;
				var physicalchk;
				var carechk;
				var cnt=0;
			if ($('#inperson-adoption-inspector').is(":checked"))
			{
				homechk =$('#availableSun').val();
			}			
			if ($('#inperson-adoption-reviewer').is(":checked"))
			{
				reviewerchk =$('#availableMon').val();
			}
			if ($('#inperson-physical-fundraiser').is(":checked"))
			{
				physicalchk =$('#inperson-physical-fundraiser').val();
			}
			if ($('#inperson-animal-care').is(":checked"))
			{
				carechk = $('#inperson-animal-care').val();
			}
			var limit = 0;
			 $.ajax({
			  type: "POST",
			  url: '<?php echo base_url(); ?>org_dashboard/inperson_volunteer_search',
			  beforeSend: function(){
				  $('#loader').show();
                  $('#submit').attr('disabled','disabled');
                  $('#dobt-pagination').remove();
			  },
			
			 data: {inpersonzipcode:fosterzip, inpersonradius:radius, inpersoninspector:homechk ,inpersonreviewer:reviewerchk ,inpersonfundraiser:physicalchk, inpersonanimalcare:carechk, ajax:1},
					
			  dataType:'json',
			  cache:    false,
			  
			  complete: function(){
				$('#loader').hide();
                $('#submit').removeAttr('disabled');
			  },
			  success:function(data){
					console.log(data);
					$('#grid-view').empty();
					
					
					for(var i=0; i<data.counter;i++)
					{
				        var row ='<tr>';
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="InPerson-search-result-box" ><div class="top-part">';
				       
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="img_radius"/></a></td>';
                         
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						
						//row +='<ul>';
						row +='<td>';
						 if(data.foster_list[i].homelink &&  data.foster_list[i].homelink !=''){
							//row +='<img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" />';
							row +='Foster Home, ';
						 }
						
					    if(data.foster_list[i].photolink){
							//row +='<img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" />';
							row +='Photographer, ';
						}

						if(data.foster_list[i].pilotlink){
							//row +='<img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" />';	
							row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" />';	
						    row +='Driver, ';	
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" />';	
						  row += 'In Person Volunteer, ';	
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" />';		
						  row +='Virtual Volunteer, ';		
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support"/>';		
						 row +='Lost Animal Support,';		
						}
						row = row.replace(/,\s*$/, "");	
						row +='</td>';
						
						//row +='</div><div class="clear"></div><div class="bottom-part">';
						
						row +='<td>';										
							if(data.foster_list[i].in_home_visit && data.foster_list[i].in_home_visit==1){
								row +='<p><span>Adoption/Foster home visit inspector</span> (visiting the home of an applicant)</p>';
							}
							if(data.foster_list[i].in_app_reviewer && data.foster_list[i].in_app_reviewer == 1){
								row += '<p><span>Adoption application reviewer</span> (reviewing applications at a booth or facility)</p>';
							}
							if(data.foster_list[i].in_physical_fundraiser && data.foster_list[i].in_physical_fundraiser ==1){
								row += '<p><span>Physical fundraiser</span> (i.e. booth at an event or actual fundraising event)</p>';
							}
							if(data.foster_list[i].in_animal_care && data.foster_list[i].in_animal_care ==1){
								row +='<p><span>Animal care at a facility</span> (walking or socializing animals, cleaning cages)</p>';
							} 	
						row +='</td>';
						row +='<td class="center"><a href="#user-contact" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')" class="btn primary orange btn-action"  data-toggle="modal"><i class="material-icons">email</i></a></td>';
						//row +='</div></div></div>';
				 row +='</tr>';	
			//alert(row);			
						$('#grid-view').append(row);
						//alert('add one element');
					}
					
					if(data.counter==0){
						$('#view-as').css('display','none');
					}else{
							$('#view-as').css('display','block');
					}
					//var newrow='<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>'
                   //$('#grid-view').append(newrow);
				    $('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-inperson');
					
					$('#showingresult').empty();
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+$.trim(fosterzip)+', <b>Radius</b>: '+ radius;
					//var str = 'Showing '+ data.total_rows +' results'; 
					$('#showingresult').html(str);
					//equalheight('.gr-wrap .InPerson-search-result-box');
					$('#card-table-inperson').cardtable();
				},	//	
			/*  
			error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
					alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }*/
		});	
	}

	function autoload2()
	{
	var zipcode = $('#InPerson-zipcode').val();
	var radius  = $('#InPerson-radius').val();
	var avilableday = new Array();
	var homechk;
	var reviewerchk;
	var physicalchk;
	var carechk;
	var cnt=0;
		if ($('#inperson-adoption-inspector').is(":checked"))
			{
				homechk =$('#inperson-adoption-inspector').val();
			}			
		if ($('#inperson-adoption-reviewer').is(":checked"))
			{
				reviewerchk =$('#inperson-adoption-reviewer').val();
			}
		if ($('#inperson-physical-fundraiser').is(":checked"))
			{
				physicalchk =$('#inperson-physical-fundraiser').val();
			}
		if ($('#inperson-animal-care').is(":checked"))
			{
				carechk = $('#inperson-animal-care').val();
			}
		$.ajax({
			type: "POST",
			//url: $(this).attr("href"),
			url:'<?php echo base_url(); ?>org_dashboard/inperson_volunteer_search',
			cache:    false,
		    beforeSend: function(){
			$('#loader').show();
            $('#submit').attr('disabled','disabled');
            $('#dobt-pagination').remove();
	        },
			data: {inpersonzipcode:zipcode, inpersonradius:radius, inpersoninspector:homechk ,inpersonreviewer:reviewerchk ,inpersonfundraiser:physicalchk, inpersonanimalcare:carechk, ajax:1},
			    
			complete: function(){
			 $('#loader').hide();
             $('#submit').removeAttr('disabled');
			},
			success:function(data){
					$('#grid-view').empty();
					var data = JSON.parse(data);
			        //alert(myString);
					//var str = myString.toString();
					if(data.counter!=0){
					for(var i=0; i<data.counter;i++)
					{
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="InPerson-search-result-box" ><div class="top-part">';
					var row ='<tr>'; 
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="InPerson-img"/></a></td>';
						 
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						//row +='<ul>';
						row +='<td>';
						if(data.foster_list[i].homelink &&  data.foster_list[i].homelink !=''){
						//row +='<img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" />';
						row +='Foster Home, ';
						}
						
						if(data.foster_list[i].photolink){
						//row +='<img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" />';
							row +='Photographer, ';
						}

						if(data.foster_list[i].pilotlink){
						//row +='<img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" />';	
						row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" />';	
						row +='Driver, ';	
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" />';	
						 row += 'In Person Volunteer, ';	
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" />';
                         row +='Volunteer, ';						 
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support"/>';		
						 row +='Lost Animal Support, ';		
						}
						row = row.replace(/,\s*$/, "");	
						row +='</td>';
						//row +='</ul></div><div class="clear"></div><div class="bottom-part">';
						row +='<td>';										
						if(data.foster_list[i].in_home_visit && data.foster_list[i].in_home_visit==1){
							row +='<p><span>Adoption/Foster home visit inspector</span> (visiting the home of an applicant)</p>';
						}
						if(data.foster_list[i].in_app_reviewer && data.foster_list[i].in_app_reviewer == 1){
							row += '<p><span>Adoption application reviewer</span> (reviewing applications at a booth or facility)</p>';
						}
						if(data.foster_list[i].in_physical_fundraiser && data.foster_list[i].in_physical_fundraiser ==1){
							row += '<p><span>Physical fundraiser</span> (i.e. booth at an event or actual fundraising event)</p>';
						}
						if(data.foster_list[i].in_animal_care && data.foster_list[i].in_animal_care ==1){
							row +='<p><span>Animal care at a facility</span> (walking or socializing animals, cleaning cages)</p>';
						}	
						//row +='</div></div></div>';
						row +='</td>';
						row +='<td class="center"><a href="#user-contact" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')" class="btn primary orange btn-action"  data-toggle="modal"><i class="material-icons">email</i></a></td>';
					row +='</tr>';		
						$('#grid-view').append(row);
						//alert('add one element');
					}
					//var newrow='<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>'
                   //$('#grid-view').append(newrow);
					$('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-inperson');	
					}else {
						$str1 = "<p>"+data.Err_Msg +"</p>";
						$('#grid-view').html($str1);
					}
					$('#showingresult').empty();
					
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+$.trim(zipcode)+', <b>Radius</b>: '+ radius;
					//var str = 'Showing '+ data.total_rows +' results'; 
					$('#showingresult').html(str);
					//equalheight('.gr-wrap .InPerson-search-result-box');
					//equalheight('.gr-wrap .photographer-search-result-box');
					$('#card-table-inperson').cardtable();
                    $(".grid").click();
                    
			},	
			
			/*error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
					alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }*/
	});
	return false;
	}	
	
function getAjaxdata() // for the pagination call 
{
	return false; 
}
	//$("#dobt-pagination a").live('click',function() {
	//$("#dobt-pagination a").click(function() {	
	$(document).on('click', '#dobt-pagination a', function(){  
		var href = $(this).attr('href');
		//alert(href);
	if(href !=''){
	var zipcode = $('#InPerson-zipcode').val();
	var radius  = $('#InPerson-radius').val();
	var avilableday = new Array();
	var homechk;
	var reviewerchk;
	var physicalchk;
	var carechk;
		var cnt=0;
		if ($('#inperson-adoption-inspector').is(":checked"))
			{
				homechk =$('#availableSun').val();
			}			
		if ($('#inperson-adoption-reviewer').is(":checked"))
			{
				reviewerchk =$('#availableMon').val();
			}
		if ($('#inperson-physical-fundraiser').is(":checked"))
			{
				physicalchk =$('#inperson-physical-fundraiser').val();
			}
		if ($('#inperson-animal-care').is(":checked"))
			{
				carechk = $('#inperson-animal-care').val();
			}
		/*if ($('#availableThu').is(":checked"))
			{
				avilableday[cnt++]=$('#availableThu').val();
			}
		if ($('#availableFri').is(":checked"))
			{
				avilableday[cnt++]=$('#availableFri').val();
			}
		if ($('#availableSat').is(":checked"))
			{
				avilableday[cnt++]=$('#availableSat').val();
			}*/
			
			$.ajax({
			   type: "POST",
			   url: $(this).attr("href"),
			   cache:    false,
		   beforeSend: function(){
			$('#loader').show();
            $('#submit').attr('disabled','disabled');
            $('#dobt-pagination').remove();
	       },
			data: {inpersonzipcode:zipcode, inpersonradius:radius, inpersoninspector:homechk ,inpersonreviewer:reviewerchk ,inpersonfundraiser:physicalchk, inpersonanimalcare:carechk, ajax:1},
			    
			complete: function(){
			 $('#loader').hide();
             $('#submit').removeAttr('disabled');
			},
			success:function(data){
					$('#grid-view').empty();
					var data = JSON.parse(data);
			        //alert(myString); return false;
					//var str = myString.toString();
					for(var i=0; i<data.counter; i++)
					{
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="InPerson-search-result-box"><div class="top-part">';
					var row ='<tr>';
						//var row ='<div class="gr-wrap col-lg-4 col-md-6 col-sm-6"><div class="InPerson-search-result-box" ><div class="top-part">';
				       
						row +='<td><a href="'+data.foster_list[i].imagelink+'"><img src="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" title="'+data.foster_list[i].imgsrc+'" alt="'+data.foster_list[i].st_profile_image+'" class="img_radius"/></a></td>';
                         
						row +='<td><h4><a href="'+data.foster_list[i].h4link+'">'+data.foster_list[i].st_display_name+'</a></h4></td>';
						
						//row +='<td><span style="float:right;"><img src="'+data.foster_list[i].verified_url+'" alt="'+data.foster_list[i].verified_url+'" title="'+data.foster_list[i].vertitle+'" />'+data.foster_list[i].link_arpa_cert+'</span></td>';
						
						//row +='<ul>';
						row +='<td>';
						 if(data.foster_list[i].homelink &&  data.foster_list[i].homelink !=''){
							//row +='<img src="'+data.foster_list[i].homelink+'" alt="Foster Home" title="Foster Home" />';
							row +='Foster Home, ';
						 }
						
					    if(data.foster_list[i].photolink){
							//row +='<img src="'+data.foster_list[i].photolink+'" alt="Photographer" title="Photographer" />';
							row +='Photographer, ';
						}

						if(data.foster_list[i].pilotlink){
							//row +='<img src="'+data.foster_list[i].pilotlink+'" alt="Pilot Profile" title="Pilot Profile" />';	
							row +='Pilot Profile, ';	
						}
						
						if(data.foster_list[i].driverlink){
						//row +='<img src="'+data.foster_list[i].driverlink+'" alt="Driver" title="Driver" />';	
						    row +='Driver, ';	
						}
						
						if(data.foster_list[i].personlink){
						 //row += '<img src="'+data.foster_list[i].personlink+'" alt="In Person Volunteer" title="In Person Volunteer" />';	
						  row += 'In Person Volunteer, ';	
						}

						if(data.foster_list[i].virtuallink){
						 //row +='<img src="'+data.foster_list[i].virtuallink+'" alt="Volunteer" title="Volunteer" />';		
						  row +='Virtual Volunteer, ';		
						}
						
						if(data.foster_list[i].lostanimallink){
						 //row +='<img src="'+data.foster_list[i].lostanimallink+'" alt="Lost Animal Support" title="Lost Animal Support"/>';		
						 row +='Lost Animal Support,';		
						}
						row = row.replace(/,\s*$/, "");	
						row +='</td>';
						
						//row +='</div><div class="clear"></div><div class="bottom-part">';
						
						row +='<td>';										
							if(data.foster_list[i].in_home_visit && data.foster_list[i].in_home_visit==1){
								row +='<p><span>Adoption/Foster home visit inspector</span> (visiting the home of an applicant)</p>';
							}
							if(data.foster_list[i].in_app_reviewer && data.foster_list[i].in_app_reviewer == 1){
								row += '<p><span>Adoption application reviewer</span> (reviewing applications at a booth or facility)</p>';
							}
							if(data.foster_list[i].in_physical_fundraiser && data.foster_list[i].in_physical_fundraiser ==1){
								row += '<p><span>Physical fundraiser</span> (i.e. booth at an event or actual fundraising event)</p>';
							}
							if(data.foster_list[i].in_animal_care && data.foster_list[i].in_animal_care ==1){
								row +='<p><span>Animal care at a facility</span> (walking or socializing animals, cleaning cages)</p>';
							} 	
						row +='</td>';
						row +='<td class="center"><a href="#user-contact" onClick="contactUser(\''+ data.foster_list[i].st_email+'/'+data.foster_list[i].st_display_name+'\')" class="btn primary orange btn-action"  data-toggle="modal"><i class="material-icons">email</i></a></td>';
						//row +='</div></div></div>';
				 row +='</tr>';	
						$('#grid-view').append(row);
						//alert('add one element');
					}
					//var newrow='<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>'
                   //$('#grid-view').append(newrow);
				  $('#dobt-pagination').prev( ".clear" ).html('');
				  $('#dobt-pagination').html('');
				  $('<div class="clear"></div><div id="dobt-pagination" class="dobt-pagination f1">'+data.pagination+'</div>').insertAfter('#card-table-inperson');
				   
					$('#showingresult').empty();
					
					var str = 'Showing <b>'+ data.total_rows +'</b> result(s) for <b>Zip</b>: '+$.trim(zipcode)+', <b>Radius</b>: '+ radius;
					
					//var str = 'Showing '+ data.total_rows +' results'; 
					$('#showingresult').html(str);
                    $('#card-table-inperson').cardtable();
					//equalheight('.gr-wrap .InPerson-search-result-box');
					 // for scrolling top after page load. 
					$('html, body').animate({ scrollTop: 0 }, 'slow');
			},	
			
			/*error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
					alert(jqXHR.responseText);
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }*/
	});
	//return false;
	}
	});
		//return false; 
		
//}
</script> 

<script>
equalheight = function(container){

var currentTallest = 0,
     currentRowStart = 0,
     rowDivs = new Array(),
     $el,
     topPosition = 0;
 $(container).each(function() {

   $el = $(this);
   $($el).height('auto')
   topPostion = $el.position().top;

   if (currentRowStart != topPostion) {
     for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++){
       rowDivs[currentDiv].height(currentTallest);
     }
     rowDivs.length = 0; // empty the array
     currentRowStart = topPostion;
     currentTallest = $el.height();
     rowDivs.push($el);
   } else {
     rowDivs.push($el);
     currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
  }
   for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
     rowDivs[currentDiv].height(currentTallest);
   }
 });
}

<?php /*?>$(window).load(function() {
 equalheight('.gr-wrap .InPerson-search-result-box');
 //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});


$(window).resize(function(){
  equalheight('.gr-wrap .InPerson-search-result-box');
  //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});

$(window).load(function() {
 equalheight('#my-profile .form-group');
 //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});

$(window).resize(function(){
  equalheight('#my-profile .form-group');
  //setTimeout(function(){ $(window).trigger('resize'); }, 200);
});<?php */?>
</script>
</body>
<!-- END BODY -->
</html>